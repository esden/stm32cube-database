<IP xmlns="http://mcd.rou.st.com/modules.php?name=mcu" DBVersion="V4.0" IPType="middleware" IpGroup="Middleware" Name="EXTMEM_MANAGER" Version="1.0.0" xmlns:ns0="http://www.w3.org/2001/XMLSchema-instance" ns0:schemaLocation="http://mcd.rou.st.com/modules.php?name=mcu ../../../../../../../doc/V4/Development/Specifications/db/IP_Modes.xsd">

	<RefMode Abstract="false" Name="Activate_EXTMEM">
		<ConfigForMode>EXTMEM_ENABLE</ConfigForMode>
		<!-- config -->
		<Parameter Added="true" Name="RefParam_EXTMEM_Number_of_Memory"/>
		
		<Parameter Added="true" Name="RefParam_EXTMEM_SAL_XSPI"/>
		<Parameter Added="true" Name="RefParam_EXTMEM_SAL_SD"/>
		
		<Parameter Added="true" Name="RefParam_EXTMEM_SFDP"/>
		<Parameter Added="true" Name="RefParam_EXTMEM_PSRAM"/>
		<Parameter Added="true" Name="RefParam_EXTMEM_SDCARD"/>
	    <Parameter Added="true" Name="RefParam_EXTMEM_USER"/>

		<Parameter Added="true" Name="RefParam_EXTMEM_SAL_XSPI_AUTO"/>
		<Parameter Added="true" Name="RefParam_EXTMEM_SAL_SD_AUTO"/>

		<Parameter Added="true" Name="RefParam_EXTMEM_SFDP_AUTO"/>
		<Parameter Added="true" Name="RefParam_EXTMEM_PSRAM_AUTO"/>
		<Parameter Added="true" Name="RefParam_EXTMEM_SDCARD_AUTO"/>
		<Parameter Added="true" Name="RefParam_EXTMEM_USER_AUTO"/>
		
		<!-- boot -->
		<Parameter Added="true" Name="RefParam_BOOT_enable"/>
		<Parameter Added="true" Name="RefParam_BOOT_selection"/>
		<Parameter Added="true" Name="RefParam_XIP_memory"/>
		
		<Parameter Added="true" Name="RefParam_LRUN_SRC_memory"/>
		<Parameter Added="true" Name="RefParam_LRUN_SRC_offset"/>
		<Parameter Added="true" Name="RefParam_LRUN_SRC_size"/>

		<Parameter Added="true" Name="RefParam_LRUN_DEST_memory"/>
		<Parameter Added="true" Name="RefParam_LRUN_DEST_offset"/>
	
		<!-- Memory 1 -->
		<Parameter Added="true" Name="RefParam_MEMORY_1_Driver_Selection"/>
		<Parameter Added="true" Name="RefParam_MEMORY_1_Instance"/>
		<Parameter Added="true" Name="RefParam_MEMORY_1_ConfigType"/>
		<Parameter Added="true" Name="RefParam_MEMORY_1_Size"/>
		<Parameter Added="true" Name="RefParam_MEMORY_1_FreqMax"/>
		<Parameter Added="true" Name="RefParam_MEMORY_1_ReadReg"/>
		<Parameter Added="true" Name="RefParam_MEMORY_1_WriteReg"/>
		<Parameter Added="true" Name="RefParam_MEMORY_1_RegSize"/>
		<Parameter Added="true" Name="RefParam_MEMORY_1_RegDummyCycle"/>
		<Parameter Added="true" Name="RefParam_MEMORY_1_WriteCommand"/>
		<Parameter Added="true" Name="RefParam_MEMORY_1_WriteDummyCycle"/>
		<Parameter Added="true" Name="RefParam_MEMORY_1_ReadCommand"/>
		<Parameter Added="true" Name="RefParam_MEMORY_1_WrapReadCommand"/>
		<Parameter Added="true" Name="RefParam_MEMORY_1_ReadDummyCycle"/>
		<Parameter Added="true" Name="RefParam_MEMORY_1_NumberOfConfig"/>
		<Parameter Added="true" Name="RefParam_MEMORY_1_Config1_WriteMask"/>
		<Parameter Added="true" Name="RefParam_MEMORY_1_Config1_WriteValue"/>
		<Parameter Added="true" Name="RefParam_MEMORY_1_Config1_RegAddress"/>
		<Parameter Added="true" Name="RefParam_MEMORY_1_Config2_WriteMask"/>
		<Parameter Added="true" Name="RefParam_MEMORY_1_Config2_WriteValue"/>
		<Parameter Added="true" Name="RefParam_MEMORY_1_Config2_RegAddress"/>
		<Parameter Added="true" Name="RefParam_MEMORY_1_Config3_WriteMask"/>
		<Parameter Added="true" Name="RefParam_MEMORY_1_Config3_WriteValue"/>
		<Parameter Added="true" Name="RefParam_MEMORY_1_Config3_RegAddress"/>
		<!-- Memory 2 -->
		<Parameter Added="true" Name="RefParam_MEMORY_2_Driver_Selection"/>
		<Parameter Added="true" Name="RefParam_MEMORY_2_Instance"/>
		<Parameter Added="true" Name="RefParam_MEMORY_2_ConfigType"/>
		<Parameter Added="true" Name="RefParam_MEMORY_2_Size"/>
		<Parameter Added="true" Name="RefParam_MEMORY_2_FreqMax"/>
		<Parameter Added="true" Name="RefParam_MEMORY_2_ReadReg"/>
		<Parameter Added="true" Name="RefParam_MEMORY_2_WriteReg"/>
		<Parameter Added="true" Name="RefParam_MEMORY_2_RegSize"/>
		<Parameter Added="true" Name="RefParam_MEMORY_2_RegDummyCycle"/>
		<Parameter Added="true" Name="RefParam_MEMORY_2_WriteCommand"/>
		<Parameter Added="true" Name="RefParam_MEMORY_2_WriteDummyCycle"/>
		<Parameter Added="true" Name="RefParam_MEMORY_2_ReadCommand"/>
		<Parameter Added="true" Name="RefParam_MEMORY_2_WrapReadCommand"/>
		<Parameter Added="true" Name="RefParam_MEMORY_2_ReadDummyCycle"/>
		<Parameter Added="true" Name="RefParam_MEMORY_2_NumberOfConfig"/>
		<Parameter Added="true" Name="RefParam_MEMORY_2_Config1_WriteMask"/>
		<Parameter Added="true" Name="RefParam_MEMORY_2_Config1_WriteValue"/>
		<Parameter Added="true" Name="RefParam_MEMORY_2_Config1_RegAddress"/>
		<Parameter Added="true" Name="RefParam_MEMORY_2_Config2_WriteMask"/>
		<Parameter Added="true" Name="RefParam_MEMORY_2_Config2_WriteValue"/>
		<Parameter Added="true" Name="RefParam_MEMORY_2_Config2_RegAddress"/>
		<Parameter Added="true" Name="RefParam_MEMORY_2_Config3_WriteMask"/>
		<Parameter Added="true" Name="RefParam_MEMORY_2_Config3_WriteValue"/>
		<Parameter Added="true" Name="RefParam_MEMORY_2_Config3_RegAddress"/>
	</RefMode>

	<ModeLogicOperator Name="OR">
		<Mode Name="Activate_EXTMEM" UserName="Activate External Memory Manager">
			<ModeLogicOperator Name="OR">
				<Mode Name="Activate_EXTMEM" UserName="Activate HAL Flash">
					<SignalLogicalOp Name="AND">
						<Signal Name="SIG_Activate_EXTMEM" />
					</SignalLogicalOp>
					<Semaphore>SEMA_Activate_EXTMEM</Semaphore>

				</Mode>
			</ModeLogicOperator>
			<Condition Expression="(XSPI1_Used | XSPI2_Used | SDMMC1_Used | SDMMC2_Used) &amp; !S_BOOTPATH" Diagnostic="Active only if XSPI or SDMMC is enbaled and Boot path disbled"/>
		</Mode>
	</ModeLogicOperator>

	<RefSignal Name="SIG_Activate_EXTMEM" Virtual="true"/>

	<!-- Menu EXTMEM configuration -->
	<RefParameter Added="true" Comment="Number of memories" DefaultValue="2" Group="Configuration" Name="RefParam_EXTMEM_Number_of_Memory" TabName="EXTMEM" Type="String" Visible="false">
		<Condition Expression="!(RefParam_MEMORY_1_Driver_Selection = EXTMEM_NOT_USED) &amp; !(RefParam_MEMORY_2_Driver_Selection=EXTMEM_NOT_USED)" Diagnostic=""/>
	</RefParameter>
	<RefParameter Added="true" Comment="Number of memories" DefaultValue="1" Group="Configuration" Name="RefParam_EXTMEM_Number_of_Memory" TabName="EXTMEM" Type="String" Visible="false">
	</RefParameter>

	<RefParameter Added="true" Comment="enable interface SD" DefaultValue="true" Group="Interface selection" Name="RefParam_EXTMEM_SAL_SD" TabName="EXTMEM" Type="String" Visible="false">
		<Condition Expression="RefParam_MEMORY_1_Driver_Selection = EXTMEM_SDCARD | RefParam_MEMORY_2_Driver_Selection = EXTMEM_SDCARD" Diagnostic="requires selection of an SD IP"/>
	</RefParameter>
	<RefParameter Added="true" Comment="enable interface SD" DefaultValue="false" Group="Interface selection" Name="RefParam_EXTMEM_SAL_SD" TabName="EXTMEM" Type="String" Visible="false">
	</RefParameter>

	<RefParameter Added="true" Comment="enable interface SD" DefaultValue="true" Group="Interface selection" Name="RefParam_EXTMEM_SAL_SD_AUTO" TabName="EXTMEM" Type="String" Visible="false">
		<Condition Expression="RefParam_MEMORY_1_Driver_Selection = EXTMEM_SDCARD | RefParam_MEMORY_2_Driver_Selection = EXTMEM_SDCARD" Diagnostic="requires selection of an SD IP"/>
	</RefParameter>
	<RefParameter Added="true" Comment="enable interface SD" DefaultValue="false" Group="Interface selection" Name="RefParam_EXTMEM_SAL_SD_AUTO" TabName="EXTMEM" Type="String" Visible="false">
	</RefParameter>

	<RefParameter Added="true" Comment="enable interface SD" DefaultValue="true" Group="Interface selection" Name="RefParam_EXTMEM_SDCARD_AUTO" TabName="EXTMEM" Type="String" Visible="false">
		<Condition Expression="RefParam_MEMORY_1_Driver_Selection = EXTMEM_SDCARD | RefParam_MEMORY_2_Driver_Selection = EXTMEM_SDCARD" Diagnostic="requires selection of an SD IP"/>
	</RefParameter>
	<RefParameter Added="true" Comment="enable interface SD" DefaultValue="false" Group="Interface selection" Name="RefParam_EXTMEM_SDCARD_AUTO" TabName="EXTMEM" Type="String" Visible="false">
	</RefParameter>

	<RefParameter Added="true" Comment="enable interface XSPI" DefaultValue="true" Group="Interface selection" Name="RefParam_EXTMEM_SAL_XSPI" TabName="EXTMEM" Type="String" Visible="false">
		<Condition Expression="(RefParam_MEMORY_1_Driver_Selection = EXTMEM_NOR_SFDP | RefParam_MEMORY_2_Driver_Selection = EXTMEM_NOR_SFDP)" Diagnostic="requires selection of an XSPI instance"/>
	</RefParameter>
	<RefParameter Added="true" Comment="enable interface XSPI" DefaultValue="false" Group="Interface selection" Name="RefParam_EXTMEM_SAL_XSPI" TabName="EXTMEM" Type="String" Visible="false">
	</RefParameter>

	<RefParameter Added="true" Comment="enable interface XSPI" DefaultValue="true" Group="Interface selection" Name="RefParam_EXTMEM_SAL_XSPI_AUTO" TabName="EXTMEM" Type="String" Visible="false">
		<Condition Expression="(RefParam_MEMORY_1_Driver_Selection = EXTMEM_NOR_SFDP | RefParam_MEMORY_2_Driver_Selection = EXTMEM_NOR_SFDP | RefParam_MEMORY_1_Driver_Selection = EXTMEM_PSRAM | RefParam_MEMORY_2_Driver_Selection = EXTMEM_PSRAM)" Diagnostic="requires selection of an XSPI instance"/>
	</RefParameter>
	<RefParameter Added="true" Comment="enable interface XSPI" DefaultValue="false" Group="Interface selection" Name="RefParam_EXTMEM_SAL_XSPI_AUTO" TabName="EXTMEM" Type="String" Visible="false">
	</RefParameter>

	<RefParameter Added="true" Comment="enable NOR_SFDP support" DefaultValue="true" Group="Driver selection" Name="RefParam_EXTMEM_SFDP" TabName="EXTMEM" Type="boolean" Visible="false">
		<Condition Expression="RefParam_MEMORY_1_Driver_Selection = EXTMEM_NOR_SFDP| RefParam_MEMORY_2_Driver_Selection = EXTMEM_NOR_SFDP" Diagnostic="requires SAL XSPI"/>
	</RefParameter>
	<RefParameter Added="true" Comment="enable NOR_SFDP support" DefaultValue="false" Group="Driver selection" Name="RefParam_EXTMEM_SFDP" TabName="EXTMEM" Type="boolean" Visible="false">
	</RefParameter>

	<RefParameter Added="true" Comment="enable NOR_SFDP support" DefaultValue="true" Group="Driver selection" Name="RefParam_EXTMEM_SFDP_AUTO" TabName="EXTMEM" Type="boolean" Visible="false">
		<Condition Expression="RefParam_MEMORY_1_Driver_Selection = EXTMEM_NOR_SFDP| RefParam_MEMORY_2_Driver_Selection = EXTMEM_NOR_SFDP" Diagnostic="requires SAL XSPI"/>
	</RefParameter>
	<RefParameter Added="true" Comment="enable NOR_SFDP support" DefaultValue="false" Group="Driver selection" Name="RefParam_EXTMEM_SFDP_AUTO" TabName="EXTMEM" Type="boolean" Visible="false">
	</RefParameter>

	<RefParameter Added="true" Comment="enable PSRAM support" DefaultValue="true" Group="Driver selection" Name="RefParam_EXTMEM_PSRAM" TabName="EXTMEM" Type="String" Visible="false">
		<Condition Expression="RefParam_MEMORY_1_Driver_Selection = EXTMEM_PSRAM | RefParam_MEMORY_2_Driver_Selection = EXTMEM_PSRAM" Diagnostic="requires SAL XSPI"/>
	</RefParameter>
	<RefParameter Added="true" Comment="enable PSRAM support" DefaultValue="false" Group="Driver selection" Name="RefParam_EXTMEM_PSRAM" TabName="EXTMEM" Type="String" Visible="false">
	</RefParameter>

	<RefParameter Added="true" Comment="enable PSRAM support" DefaultValue="true" Group="Driver selection" Name="RefParam_EXTMEM_PSRAM_AUTO" TabName="EXTMEM" Type="String" Visible="false">
		<Condition Expression="RefParam_MEMORY_1_Driver_Selection = EXTMEM_PSRAM | RefParam_MEMORY_2_Driver_Selection = EXTMEM_PSRAM" Diagnostic="requires SAL XSPI"/>
	</RefParameter>
	<RefParameter Added="true" Comment="enable PSRAM support" DefaultValue="false" Group="Driver selection" Name="RefParam_EXTMEM_PSRAM_AUTO" TabName="EXTMEM" Type="String" Visible="false">
	</RefParameter>

	<RefParameter Added="true" Comment="enable SDCARD support" DefaultValue="true" Group="Driver selection" Name="RefParam_EXTMEM_SDCARD" TabName="EXTMEM" Type="String" Visible="false">
		<Condition Expression="RefParam_EXTMEM_SAL_SD = true" Diagnostic="requires SAL SD"/>
	</RefParameter>
	<RefParameter Added="true" Comment="enable SDCARD support" DefaultValue="false" Group="Driver selection" Name="RefParam_EXTMEM_SDCARD" TabName="EXTMEM" Type="String" Visible="false">
	</RefParameter>

	<RefParameter Added="true" Comment="enable USER support" DefaultValue="true" Group="Driver selection" Name="RefParam_EXTMEM_USER" TabName="EXTMEM" Type="boolean" Visible="false">
		<Condition Expression="RefParam_MEMORY_1_Driver_Selection = EXTMEM_USER | RefParam_MEMORY_2_Driver_Selection = EXTMEM_USER" Diagnostic="requires SAL SD"/>
    </RefParameter>
	<RefParameter Added="true" Comment="enable USER support" DefaultValue="false" Group="Driver selection" Name="RefParam_EXTMEM_USER" TabName="EXTMEM" Type="boolean" Visible="false">
	</RefParameter>

	<RefParameter Added="true" Comment="enable USER support" DefaultValue="true" Group="Driver selection" Name="RefParam_EXTMEM_USER_AUTO" TabName="EXTMEM" Type="boolean" Visible="false">
		<Condition Expression="RefParam_MEMORY_1_Driver_Selection = EXTMEM_USER | RefParam_MEMORY_2_Driver_Selection = EXTMEM_USER" Diagnostic="requires SAL SD"/>
	</RefParameter>
	<RefParameter Added="true" Comment="enable USER support" DefaultValue="false" Group="Driver selection" Name="RefParam_EXTMEM_USER_AUTO" TabName="EXTMEM" Type="boolean" Visible="false">
	</RefParameter>

	<!-- boot config -->
	<RefParameter Added="true" Comment="select boot code generation" DefaultValue="false" Group="Boot" Name="RefParam_BOOT_enable" TabName="Boot usecase" Type="boolean">
		<Description>enable the boot gneration</Description>
		<PossibleValue Comment="true" Value="true"   Semaphore="Sem_BOOT_enable" />
		<PossibleValue Comment="false" Value="false" />
	</RefParameter>
	
	<RefParameter Added="true" Comment="Selection of the boot system" DefaultValue="XIP" Group="Boot" Name="RefParam_BOOT_selection" TabName="Boot usecase" Type="list" Unit="">
		<Description>select the number of memory data line</Description>
		<PossibleValue Comment="Execute In Place" Value="XIP"  Semaphore="Sem_BOOT_XIP"/>
		<PossibleValue Comment="Load and Run"     Value="LRUN" Semaphore="Sem_BOOT_LRUN"/>
		<Condition Expression="RefParam_BOOT_enable = true" Diagnostic="requires to enable the boot code generation"/>
	</RefParameter>
	
	<!-- boot config : XIP -->
	<RefParameter Added="true" Comment="select the memory" DefaultValue="EXTMEM1" Group="XIP" Name="RefParam_XIP_memory" TabName="Boot usecase" Type="list" Unit="">
	  <Description>the memeory selection correspond to set a vector table at the mount adress of the memory</Description>
	  <PossibleValue Comment="Memory 1" Value="EXTMEM1"/>
	  <PossibleValue Comment="Memory 2" Value="EXTMEM2" Condition="RefParam_EXTMEM_Number_of_Memory=1 | RefParam_MEMORY_2_Driver_Selection = EXTMEM_NOT_USED" Action="Disable"/>
	  <Condition Expression="RefParam_BOOT_enable = true &amp; RefParam_BOOT_selection = XIP" Diagnostic="requires to XIP selection"/>
	</RefParameter>
	
	<!-- boot config : LRUN source -->
	<RefParameter Added="true" Comment="select the source memory" DefaultValue="0x00000000" Group="LRUN source" Name="RefParam_LRUN_SRC_memory" TabName="Boot usecase" Type="list" Unit="">
		<Description>selection of the source memory, this memory contains the binaty to execute</Description>
		<PossibleValue Comment="Memory 1" Value="EXTMEM1"/>
		<PossibleValue Comment="Memory 2" Value="EXTMEM2" Condition="RefParam_EXTMEM_Number_of_Memory=1 | RefParam_MEMORY_2_Driver_Selection = EXTMEM_NOT_USED" Action="Disable"/>
		<Condition Expression="RefParam_BOOT_enable = true &amp; RefParam_BOOT_selection = LRUN" Diagnostic="requires to XIP selection"/>
	</RefParameter>

	<RefParameter Added="true" Comment="source address offset" DefaultValue="0x00000000" Group="LRUN source" Name="RefParam_LRUN_SRC_offset" TabName="Boot usecase" Type="interger" Unit="hex">
		<Description>selection of the source address offset</Description>
		<Condition Expression="RefParam_BOOT_enable = true &amp; RefParam_BOOT_selection = LRUN" Diagnostic="requires to Load and Run selection"/>
	</RefParameter>

	<RefParameter Added="true" Comment="source code size" DefaultValue="0x00000000" Group="LRUN source" Name="RefParam_LRUN_SRC_size" TabName="Boot usecase" Type="interger" Unit="hex">
		<Description>select the source binary size</Description>
		<Condition Expression="RefParam_BOOT_enable = true &amp; RefParam_BOOT_selection = LRUN" Diagnostic="requires to specify the binary size"/>
	</RefParameter>

	<!-- boot config : LRUN destination -->
	<RefParameter Added="true" Comment="selection of the memory" DefaultValue="0x00000000" Group="LRUN destination" Name="RefParam_LRUN_DEST_memory" TabName="Boot usecase" Type="list" Unit="">
		<Description>selection of the memory, this memory contains the binaty to execute</Description>
		<PossibleValue Comment="Internal Memory" Value="INTERNALMEM"/>
		<PossibleValue Comment="Memory 1" Value="EXTMEM1"/>
		<PossibleValue Comment="Memory 2" Value="EXTMEM2" Condition="RefParam_EXTMEM_Number_of_Memory=1 | RefParam_MEMORY_2_Driver_Selection = EXTMEM_NOT_USED" Action="Disable"/>
		<Condition Expression="RefParam_BOOT_enable = true &amp; RefParam_BOOT_selection = LRUN" Diagnostic="requires to select a memory"/>
	</RefParameter>

	<RefParameter Added="true" Comment="destination address" DefaultValue="0x24050000" Group="LRUN destination" Name="RefParam_LRUN_DEST_offset" TabName="Boot usecase" Type="integer" Unit="hex">
		<Description>selection of the destination offset adress, in case of internal memory the specified address corresponds to memory address</Description>
		<Condition Expression="RefParam_BOOT_enable = true &amp; RefParam_BOOT_selection = LRUN &amp; RefParam_LRUN_DEST_memory = INTERNALMEM" Diagnostic="requires an offset address"/>
	</RefParameter>

	<RefParameter Added="true" Comment="destination offset address" DefaultValue="0x00000000" Group="LRUN destination" Name="RefParam_LRUN_DEST_offset" TabName="Boot usecase" Type="integer" Unit="hex">
		<Description>selection of the destination offset adress, in case of internal memory the specified address correspond to memory address</Description>
		<Condition Expression="RefParam_BOOT_enable = true &amp; RefParam_BOOT_selection = LRUN" Diagnostic="requires an offset address"/>
	</RefParameter>
	
	<!-- Memu Memory 1 configuration -->
	<RefParameter Added="true" Comment="Select the memory driver" DefaultValue="EXTMEM_NOT_USED" Group="Select driver" Name="RefParam_MEMORY_1_Driver_Selection" TabName="Memory 1" Type="list" Unit="">
	<Description>selection of the driver type</Description>
		<PossibleValue Comment="EXTMEM_NOR_SFDP" Value="EXTMEM_NOR_SFDP" Condition="!(XSPI1_Used | XSPI2_Used)"   Action="Disable" Semaphore="Flash_Memory1"/>
		<PossibleValue Comment="EXTMEM_PSRAM"    Value="EXTMEM_PSRAM"    Condition="!(XSPI1_Used | XSPI2_Used)"   Action="Disable" Semaphore="Ram_Memory1"/>
		<PossibleValue Comment="EXTMEM_SDCARD"   Value="EXTMEM_SDCARD"   Condition="!(SDMMC1_Used | SDMMC2_Used)" Action="Disable"/>
		<PossibleValue Comment="EXTMEM_USER"     Value="EXTMEM_USER"     />
	</RefParameter>                                                                                                                

	<RefParameter Added="true" Comment="Memory Instance" DefaultValue="XSPI1" Group="Configuration" Name="RefParam_MEMORY_1_Instance" TabName="Memory 1" Type="list" Unit="">
	<Description>selection of the HW instance</Description>
		<PossibleValue Comment="XSPI1" Value="XSPI1" Condition="!XSPI1_Used | RefParam_MEMORY_1_Driver_Selection=EXTMEM_SDCARD" Diagnostic="Active only when EXTMEM_SFDP or EXTMEM_PSRAM driver is selected" Action="XSPI2" Semaphore="Memory1_XSPI1"/>
	    <PossibleValue Comment="XSPI2" Value="XSPI2" Condition="!XSPI2_Used | RefParam_MEMORY_1_Driver_Selection=EXTMEM_SDCARD" Diagnostic="Active only when EXTMEM_SFDP or EXTMEM_PSRAM driver is selected" Action="XSPI1" Semaphore="Memory1_XSPI2"/>
		<PossibleValue Comment="SDMMC1" Value="SDMMC1" Condition="!SDMMC1_Used | !RefParam_MEMORY_1_Driver_Selection=EXTMEM_SDCARD" Diagnostic="Active only when EXTMEM_SDCARD driver is selected" Action="SDMMC1"/>
	    <PossibleValue Comment="SDMMC2" Value="SDMMC2" Condition="!SDMMC2_Used | !RefParam_MEMORY_1_Driver_Selection=EXTMEM_SDCARD" Diagnostic="Active only when EXTMEM_SDCARD driver is selected" Action="SDMMC2"/>
		<Condition Expression="!(RefParam_MEMORY_1_Driver_Selection=EXTMEM_USER)" Diagnostic=""/>
	</RefParameter>

  <RefParameter Added="true" Comment="Number of memory data line" DefaultValue="XSPI1" Group="Configuration" Name="RefParam_MEMORY_1_ConfigType" TabName="Memory 1" Type="list" Unit="">
	<Description>select the number of memory data line</Description>
	<PossibleValue Comment="EXTMEM_LINK_CONFIG_1LINE" Value="EXTMEM_LINK_CONFIG_1LINE"/>
	<PossibleValue Comment="EXTMEM_LINK_CONFIG_8LINES" Value="EXTMEM_LINK_CONFIG_8LINES" Condition="(RefParam_MEMORY_1_Instance=XSPI1 &amp; !Sem_XSPI1_Octo) | (RefParam_MEMORY_1_Instance=XSPI2 &amp; !Sem_XSPI2_Octo)" Diagnostic="Active only when XSPI enabled in Octo SPI mode" Action="EXTMEM_LINK_CONFIG_1LINE"/>
	<PossibleValue Comment="EXTMEM_LINK_CONFIG_16LINES" Value="EXTMEM_LINK_CONFIG_16LINES" Condition="(RefParam_MEMORY_1_Instance=XSPI1 &amp; !Sem_XSPI1_HyperBus) | (RefParam_MEMORY_1_Instance=XSPI2 &amp; !Sem_XSPI2_HyperBus)" Diagnostic="Active only when XSPI enabled in Hexa SPI mode" Action="EXTMEM_LINK_CONFIG_1LINE"/>
	  <Condition Expression="!(RefParam_MEMORY_1_Driver_Selection=EXTMEM_USER)" Diagnostic=""/>
  </RefParameter>

  <RefParameter Added="true" Comment="Memory Size" DefaultValue="HAL_XSPI_SIZE_256MB" Group="Memory Info" Name="RefParam_MEMORY_1_Size" TabName="Memory 1" Type="list" Unit="">
	<Description>select the memory size</Description>
	<PossibleValue Comment="HAL_XSPI_SIZE_16MB" Value="HAL_XSPI_SIZE_16MB" />
	<PossibleValue Comment="HAL_XSPI_SIZE_32MB" Value="HAL_XSPI_SIZE_32MB" />
	<PossibleValue Comment="HAL_XSPI_SIZE_64MB" Value="HAL_XSPI_SIZE_64MB" />
	<PossibleValue Comment="HAL_XSPI_SIZE_128MB" Value="HAL_XSPI_SIZE_128MB" />
		<PossibleValue Comment="HAL_XSPI_SIZE_256MB" Value="HAL_XSPI_SIZE_256MB" />
		<PossibleValue Comment="HAL_XSPI_SIZE_512MB" Value="HAL_XSPI_SIZE_512MB" />
		<PossibleValue Comment="HAL_XSPI_SIZE_1GB" Value="HAL_XSPI_SIZE_1GB" />
		<PossibleValue Comment="HAL_XSPI_SIZE_2GB" Value="HAL_XSPI_SIZE_2GB" />
		<Condition Expression="RefParam_MEMORY_1_Driver_Selection = EXTMEM_PSRAM" Diagnostic="requires the selection of a second memory"/>
	</RefParameter>

	<RefParameter Added="true" Comment="Memory Maximun Frequency" DefaultValue="200" Group="Memory Info" Name="RefParam_MEMORY_1_FreqMax" TabName="Memory 1" Type="integer" Unit="Mhz">
		<Description>selection of the driver type</Description>
		<Condition Expression="RefParam_MEMORY_1_Driver_Selection = EXTMEM_PSRAM" Diagnostic="requires the selection of a second memory"/>
	</RefParameter>

	<RefParameter Added="true" Comment="Read Register command" DefaultValue="0x40" Group="Memory Command" Name="RefParam_MEMORY_1_ReadReg" TabName="Memory 1" Type="integer" Unit="hex">
		<Description>selection of the driver type</Description>
		<Condition Expression="RefParam_MEMORY_1_Driver_Selection = EXTMEM_PSRAM" Diagnostic="requires the selection of a second memory"/>
	</RefParameter>

	<RefParameter Added="true" Comment="Write Register command" DefaultValue="0xC0" Group="Memory Command" Name="RefParam_MEMORY_1_WriteReg" TabName="Memory 1" Type="integer" Unit="hex">
		<Description>selection of the driver type</Description>
		<Condition Expression="RefParam_MEMORY_1_Driver_Selection = EXTMEM_PSRAM" Diagnostic="requires the selection of a second memory"/>
	</RefParameter>

	<RefParameter Added="true" Comment="Register Size"         DefaultValue="2" Group="Memory Command" Name="RefParam_MEMORY_1_RegSize" TabName="Memory 1" Type="integer">
		<Description>selection of the driver type</Description>
		<Condition Expression="RefParam_MEMORY_1_Driver_Selection = EXTMEM_PSRAM" Diagnostic="requires the selection of a second memory"/>
	</RefParameter>

	<RefParameter Added="true" Comment="Register Dummy Cycle" DefaultValue="4" Group="Memory Command" Name="RefParam_MEMORY_1_RegDummyCycle" TabName="Memory 1" Type="integer" Unit="">
		<Description>selection of the driver type</Description>
		<Condition Expression="RefParam_MEMORY_1_Driver_Selection = EXTMEM_PSRAM" Diagnostic="requires the selection of a second memory"/>
	</RefParameter>

	<RefParameter Added="true" Comment="Write Command" DefaultValue="0xA0" Group="Memory Command" Name="RefParam_MEMORY_1_WriteCommand" TabName="Memory 1" Type="integer" Unit="hex">
		<Description>selection of the driver type</Description>
		<Condition Expression="RefParam_MEMORY_1_Driver_Selection = EXTMEM_PSRAM" Diagnostic="requires the selection of a second memory"/>
	</RefParameter>

	<RefParameter Added="true" Comment="Write Dummy Cycle" DefaultValue="4" Group="Memory Command" Name="RefParam_MEMORY_1_WriteDummyCycle" TabName="Memory 1" Type="integer" Unit="">
		<Description>selection of the driver type</Description>
		<Condition Expression="RefParam_MEMORY_1_Driver_Selection = EXTMEM_PSRAM" Diagnostic="requires the selection of a second memory"/>
	</RefParameter>

	<RefParameter Added="true" Comment="Read Command" DefaultValue="0x20" Group="Memory Command" Name="RefParam_MEMORY_1_ReadCommand" TabName="Memory 1" Type="integer" Unit="hex">
		<Description>selection of the driver type</Description>
		<Condition Expression="RefParam_MEMORY_1_Driver_Selection = EXTMEM_PSRAM" Diagnostic="requires the selection of a second memory"/>
	</RefParameter>

	<RefParameter Added="true" Comment="Wrap Read Command" DefaultValue="0x00" Group="Memory Command" Name="RefParam_MEMORY_1_WrapReadCommand" TabName="Memory 1" Type="integer" Unit="hex">
		<Description>selection of the driver type</Description>
		<Condition Expression="RefParam_MEMORY_1_Driver_Selection = EXTMEM_PSRAM" Diagnostic="requires the selection of a second memory"/>
	</RefParameter>

	<RefParameter Added="true" Comment="Read Dummy Cycle" DefaultValue="4" Group="Memory Command" Name="RefParam_MEMORY_1_ReadDummyCycle" TabName="Memory 1" Type="integer" Unit="">
		<Description>selection of the driver type</Description>
		<Condition Expression="RefParam_MEMORY_1_Driver_Selection = EXTMEM_PSRAM" Diagnostic="valid only for PSRAM memory"/>
	</RefParameter>

	<!-- Manage the memory configuration : PSRAM -->
	<RefParameter Added="true" Comment="Number of Config" DefaultValue="0" Group="Memory Configuration" Name="RefParam_MEMORY_1_NumberOfConfig" TabName="Memory 1" Type="integer" Unit="">
		<Description>selection the number of configuration</Description>
		<Condition Expression="RefParam_MEMORY_1_Driver_Selection = EXTMEM_PSRAM" Diagnostic=""/>
	</RefParameter>
	
	<!-- config 1 -->
		<RefParameter Added="true" Comment="Write Mask" DefaultValue="0x00" Group="Configuration 1" Max="255" Min="0" Name="RefParam_MEMORY_1_Config1_WriteMask" TabName="Memory 1" Type="integer" Unit="hex">
			<Description>selection the write mask</Description>
			<Condition Expression="RefParam_MEMORY_1_Driver_Selection = EXTMEM_PSRAM &amp; RefParam_MEMORY_1_NumberOfConfig &gt;= 1" Diagnostic="requires minimun 1 configuration selected"/>
		</RefParameter>
		<RefParameter Added="true" Comment="Write Value" DefaultValue="0x00" Group="Configuration 1" Max="255" Min="0" Name="RefParam_MEMORY_1_Config1_WriteValue" TabName="Memory 1" Type="integer" Unit="hex">
			<Description>selection the write value</Description>
			<Condition Expression="RefParam_MEMORY_1_Driver_Selection = EXTMEM_PSRAM &amp; RefParam_MEMORY_1_NumberOfConfig &gt;= 1" Diagnostic="requires minimun 1 configuration selected"/>
		</RefParameter>
		<RefParameter Added="true" Comment="Register Address" DefaultValue="0x00" Group="Configuration 1" Max="255" Min="0" Name="RefParam_MEMORY_1_Config1_RegAddress" TabName="Memory 1" Type="integer" Unit="hex">
			<Description>selection of the driver type</Description>
			<Condition Expression="RefParam_MEMORY_1_Driver_Selection = EXTMEM_PSRAM &amp; RefParam_MEMORY_1_NumberOfConfig &gt;= 1" Diagnostic="requires minimun 1 configuration selected"/>
		</RefParameter>
		<!-- config 2 -->
		<RefParameter Added="true" Comment="Write Mask" DefaultValue="0x00" Group="Configuration 2" Max="255" Min="0" Name="RefParam_MEMORY_1_Config2_WriteMask" TabName="Memory 1" Type="integer" Unit="hex">
			<Description>selection of the driver type</Description>
			<Condition Expression="RefParam_MEMORY_1_Driver_Selection = EXTMEM_PSRAM &amp; RefParam_MEMORY_1_NumberOfConfig &gt;= 2" Diagnostic="requires minimun 1 configuration selected"/>
		</RefParameter>
		<RefParameter Added="true" Comment="Write Value" DefaultValue="0x00" Group="Configuration 2" Max="255" Min="0" Name="RefParam_MEMORY_1_Config2_WriteValue" TabName="Memory 1" Type="integer" Unit="hex">
			<Description>selection of the driver type</Description>
			<Condition Expression="RefParam_MEMORY_1_Driver_Selection = EXTMEM_PSRAM &amp; RefParam_MEMORY_1_NumberOfConfig &gt;= 2" Diagnostic="requires minimun 1 configuration selected"/>
		</RefParameter>
		<RefParameter Added="true" Comment="Register Address" DefaultValue="0x00" Group="Configuration 2" Max="255" Min="0" Name="RefParam_MEMORY_1_Config2_RegAddress" TabName="Memory 1" Type="integer" Unit="hex">
			<Description>selection of the driver type</Description>
			<Condition Expression="RefParam_MEMORY_1_Driver_Selection = EXTMEM_PSRAM &amp; RefParam_MEMORY_1_NumberOfConfig &gt;= 2" Diagnostic="requires minimun 1 configuration selected"/>
		</RefParameter>
		<!-- config 1 -->
		<RefParameter Added="true" Comment="Write Mask" DefaultValue="0x00" Group="Configuration 3" Max="255" Min="0" Name="RefParam_MEMORY_1_Config3_WriteMask" TabName="Memory 1" Type="integer" Unit="hex">
			<Description>selection of the driver type</Description>
			<Condition Expression="RefParam_MEMORY_1_Driver_Selection = EXTMEM_PSRAM &amp; RefParam_MEMORY_1_NumberOfConfig &gt;= 3" Diagnostic="requires minimun 1 configuration selected"/>
		</RefParameter>
		<RefParameter Added="true" Comment="Write Value" DefaultValue="0x00" Group="Configuration 3" Max="255" Min="0" Name="RefParam_MEMORY_1_Config3_WriteValue" TabName="Memory 1" Type="integer" Unit="hex">
			<Description>selection of the driver type</Description>
			<Condition Expression="RefParam_MEMORY_1_Driver_Selection = EXTMEM_PSRAM &amp; RefParam_MEMORY_1_NumberOfConfig &gt;= 3" Diagnostic="requires minimun 1 configuration selected"/>
		</RefParameter>
		<RefParameter Added="true" Comment="Register Address" DefaultValue="0x00" Group="Configuration 3" Max="255" Min="0" Name="RefParam_MEMORY_1_Config3_RegAddress" TabName="Memory 1" Type="integer" Unit="hex">
			<Description>selection of the driver type</Description>
			<Condition Expression="RefParam_MEMORY_1_Driver_Selection = EXTMEM_PSRAM &amp; RefParam_MEMORY_1_NumberOfConfig &gt;= 3" Diagnostic="requires minimun 1 configuration selected"/>
		</RefParameter>

	<!-- Memu Memory 2 configuration -->
	<RefParameter Added="true" Comment="Select the memory driver" DefaultValue="EXTMEM_NOT_USED" Group="Select driver" Name="RefParam_MEMORY_2_Driver_Selection" TabName="Memory 2" Type="list" Unit="">
	    <Description>selection of the driver type</Description>
	    <PossibleValue Comment="NONE" Value="EXTMEM_NOT_USED"/>
		<PossibleValue Comment="EXTMEM_NOR_SFDP" Value="EXTMEM_NOR_SFDP" Condition="!(XSPI1_Used | XSPI2_Used)"   Action="Disable" Semaphore="Flash_Memory2"/>
	    <PossibleValue Comment="EXTMEM_PSRAM"    Value="EXTMEM_PSRAM"    Condition="!(XSPI1_Used | XSPI2_Used)"   Action="Disable" Semaphore="Ram_Memory2"/>
		<PossibleValue Comment="EXTMEM_SDCARD"   Value="EXTMEM_SDCARD"   Condition="!(SDMMC1_Used | SDMMC2_Used)" Action="Disable"/>
		<PossibleValue Comment="EXTMEM_USER"     Value="EXTMEM_USER"     />
		<!--<Condition Expression="!(RefParam_MEMORY_1_Driver_Selection=EXTMEM_NOT_USED)" Diagnostic="requires the selection of a second memory"/>-->
	</RefParameter>

	<RefParameter Added="true" Comment="Memory Instance" DefaultValue="XSPI2" Group="Configuration" Name="RefParam_MEMORY_2_Instance" TabName="Memory 2" Type="list" Unit="">
	    <Description>selection of the HW instance</Description>
		<PossibleValue Comment="XSPI1" Value="XSPI1" Condition="!XSPI1_Used | RefParam_MEMORY_1_Instance=XSPI1 | RefParam_MEMORY_2_Driver_Selection=EXTMEM_SDCARD" Diagnostic="Active only when XSPI1 is enabled and not used by Memory 2 and EXTMEM_SFDP or EXTMEM_PSRAM driver is selected" Action="XSPI2" Semaphore="Memory2_XSPI1"/>
	    <PossibleValue Comment="XSPI2" Value="XSPI2" Condition="!XSPI2_Used | RefParam_MEMORY_1_Instance=XSPI2 | RefParam_MEMORY_2_Driver_Selection=EXTMEM_SDCARD" Diagnostic="Active only when XSPI1 is enabled and not used by Memory 2 and EXTMEM_SFDP or EXTMEM_PSRAM driver is selected" Action="XSPI1" Semaphore="Memory2_XSPI2"/>
		<PossibleValue Comment="SDMMC1" Value="SDMMC1" Condition="!SDMMC1_Used | RefParam_MEMORY_1_Instance=SDMMC1 | !RefParam_MEMORY_2_Driver_Selection=EXTMEM_SDCARD" Diagnostic="Active only when SDMMC1 is enabled and not used by Memory 1 and EXTMEM_SDCARD driver is selected" Action="SDMMC1"/>
	    <PossibleValue Comment="SDMMC2" Value="SDMMC2" Condition="!SDMMC2_Used | RefParam_MEMORY_1_Instance=SDMMC2 | !RefParam_MEMORY_2_Driver_Selection=EXTMEM_SDCARD" Diagnostic="Active only when SDMMC2 is enabled and not used by Memory 1  and EXTMEM_SDCARD driver is selected" Action="SDMMC2"/>
		<Condition Expression="RefParam_EXTMEM_Number_of_Memory&gt;=2 &amp; (RefParam_MEMORY_2_Driver_Selection=EXTMEM_SDCARD | RefParam_MEMORY_2_Driver_Selection=EXTMEM_PSRAM |
							   RefParam_MEMORY_2_Driver_Selection=EXTMEM_NOR_SFDP)" Diagnostic="requires the selection of a second memory"/>
	</RefParameter>

  <RefParameter Added="true" Comment="Number of memory data line" DefaultValue="XSPI1" Group="Configuration" Name="RefParam_MEMORY_2_ConfigType" TabName="Memory 2" Type="list" Unit="">
	<Description>select the number of memory data line</Description>
	<PossibleValue Comment="EXTMEM_LINK_CONFIG_1LINE" Value="EXTMEM_LINK_CONFIG_1LINE"/>
	<PossibleValue Comment="EXTMEM_LINK_CONFIG_8LINES" Value="EXTMEM_LINK_CONFIG_8LINES" Condition="(RefParam_MEMORY_2_Instance=XSPI1 &amp; !Sem_XSPI1_Octo) | (RefParam_MEMORY_2_Instance=XSPI2 &amp; !Sem_XSPI2_Octo)" Diagnostic="Active only when XSPI enabled in Octo SPI mode" Action="EXTMEM_LINK_CONFIG_1LINE"/>
	<PossibleValue Comment="EXTMEM_LINK_CONFIG_16LINES" Value="EXTMEM_LINK_CONFIG_16LINES" Condition="(RefParam_MEMORY_2_Instance=XSPI1 &amp; !Sem_XSPI1_Hexa) | (RefParam_MEMORY_2_Instance=XSPI2 &amp; !Sem_XSPI2_Hexa)" Diagnostic="Active only when XSPI enabled in Hexa SPI mode" Action="EXTMEM_LINK_CONFIG_1LINE"/>
	<Condition Expression="RefParam_EXTMEM_Number_of_Memory&gt;=2 &amp; (RefParam_MEMORY_2_Driver_Selection=EXTMEM_SDCARD | RefParam_MEMORY_2_Driver_Selection=EXTMEM_PSRAM |
							   RefParam_MEMORY_2_Driver_Selection=EXTMEM_NOR_SFDP)" Diagnostic="requires the selection of a second memory"/>
  </RefParameter>

	<RefParameter Added="true" Comment="Memory Size" DefaultValue="HAL_XSPI_SIZE_256MB" Group="Memory Info" Name="RefParam_MEMORY_2_Size" TabName="Memory 2" Type="list" Unit="">
	<Description>select the memory size</Description>
		<PossibleValue Comment="HAL_XSPI_SIZE_16MB" Value="HAL_XSPI_SIZE_16MB" />
		<PossibleValue Comment="HAL_XSPI_SIZE_32MB" Value="HAL_XSPI_SIZE_32MB" />
		<PossibleValue Comment="HAL_XSPI_SIZE_64MB" Value="HAL_XSPI_SIZE_64MB" />
		<PossibleValue Comment="HAL_XSPI_SIZE_128MB" Value="HAL_XSPI_SIZE_128MB" />
		<PossibleValue Comment="HAL_XSPI_SIZE_256MB" Value="HAL_XSPI_SIZE_256MB" />
		<PossibleValue Comment="HAL_XSPI_SIZE_512MB" Value="HAL_XSPI_SIZE_512MB" />
		<PossibleValue Comment="HAL_XSPI_SIZE_1GB" Value="HAL_XSPI_SIZE_1GB" />
		<PossibleValue Comment="HAL_XSPI_SIZE_2GB" Value="HAL_XSPI_SIZE_2GB" />
		<Condition Expression="RefParam_EXTMEM_Number_of_Memory &gt;= 2 &amp; RefParam_MEMORY_2_Driver_Selection = EXTMEM_PSRAM" Diagnostic="requires the selection of a second memory"/>
	</RefParameter>

	<RefParameter Added="true" Comment="Memory Maximun Frequency" DefaultValue="200" Group="Memory Info" Name="RefParam_MEMORY_2_FreqMax" TabName="Memory 2" Type="integer" Unit="Mhz">
		<Description>selection of the driver type</Description>
		<Condition Expression="RefParam_EXTMEM_Number_of_Memory &gt;= 2 &amp; RefParam_MEMORY_2_Driver_Selection = EXTMEM_PSRAM" Diagnostic="requires the selection of a second memory"/>
	</RefParameter>

	<RefParameter Added="true" Comment="Read Register command" DefaultValue="0x40" Group="Memory Command" Name="RefParam_MEMORY_2_ReadReg" TabName="Memory 2" Type="integer" Unit="hex">
		<Description>selection of the driver type</Description>
		<Condition Expression="RefParam_EXTMEM_Number_of_Memory &gt;= 2 &amp; RefParam_MEMORY_2_Driver_Selection = EXTMEM_PSRAM" Diagnostic="requires the selection of a second memory"/>
	</RefParameter>

	<RefParameter Added="true" Comment="Write Register command" DefaultValue="0xC0" Group="Memory Command" Name="RefParam_MEMORY_2_WriteReg" TabName="Memory 2" Type="integer" Unit="hex">
		<Description>selection of the driver type</Description>
		<Condition Expression="RefParam_EXTMEM_Number_of_Memory &gt;= 2 &amp; RefParam_MEMORY_2_Driver_Selection = EXTMEM_PSRAM" Diagnostic="requires the selection of a second memory"/>
	</RefParameter>

	<RefParameter Added="true" Comment="Register Size" DefaultValue="2" Group="Memory Command" Name="RefParam_MEMORY_2_RegSize" TabName="Memory 2" Type="integer" Unit="">
		<Description>selection of the driver type</Description>
		<Condition Expression="RefParam_EXTMEM_Number_of_Memory &gt;= 2 &amp; RefParam_MEMORY_2_Driver_Selection = EXTMEM_PSRAM" Diagnostic="requires the selection of a second memory"/>
	</RefParameter>

	<RefParameter Added="true" Comment="MEMORY_1_RegDummyCycle" DefaultValue="4" Group="Memory Command" Name="RefParam_MEMORY_2_RegDummyCycle" TabName="Memory 2" Type="integer" Unit="">
		<Description>selection of the driver type</Description>
		<Condition Expression="RefParam_EXTMEM_Number_of_Memory &gt;= 2 &amp; RefParam_MEMORY_2_Driver_Selection = EXTMEM_PSRAM" Diagnostic="requires the selection of a second memory"/>
	</RefParameter>
	<RefParameter Added="true" Comment="Write Command" DefaultValue="0xA0" Group="Memory Command" Name="RefParam_MEMORY_2_WriteCommand" TabName="Memory 2" Type="integer" Unit="hex">
		<Description>selection of the driver type</Description>
		<Condition Expression="RefParam_EXTMEM_Number_of_Memory &gt;= 2 &amp; RefParam_MEMORY_2_Driver_Selection = EXTMEM_PSRAM" Diagnostic="requires the selection of a second memory"/>
	</RefParameter>

	<RefParameter Added="true" Comment="Write Dummy Cycle" DefaultValue="4" Group="Memory Command" Name="RefParam_MEMORY_2_WriteDummyCycle" TabName="Memory 2" Type="integer" Unit="">
		<Description>selection of the driver type</Description>
		<Condition Expression="RefParam_EXTMEM_Number_of_Memory &gt;= 2 &amp; RefParam_MEMORY_2_Driver_Selection = EXTMEM_PSRAM" Diagnostic="requires the selection of a second memory"/>
	</RefParameter>

	<RefParameter Added="true" Comment="Read Command" DefaultValue="0x20" Group="Memory Command" Name="RefParam_MEMORY_2_ReadCommand" TabName="Memory 2" Type="integer" Unit="hex">
		<Description>selection of the driver type</Description>
		<Condition Expression="RefParam_EXTMEM_Number_of_Memory &gt;= 2 &amp; RefParam_MEMORY_2_Driver_Selection = EXTMEM_PSRAM" Diagnostic="requires the selection of a second memory"/>
	</RefParameter>

	<RefParameter Added="true" Comment="Wrap Read Command" DefaultValue="0x00" Group="Memory Command" Name="RefParam_MEMORY_2_WrapReadCommand" TabName="Memory 2" Type="integer" Unit="hex">
		<Description>selection of the driver type</Description>
		<Condition Expression="RefParam_EXTMEM_Number_of_Memory &gt;= 2 &amp; RefParam_MEMORY_2_Driver_Selection = EXTMEM_PSRAM" Diagnostic="requires the selection of a second memory"/>
	</RefParameter>

	<RefParameter Added="true" Comment="Read Dummy Cycle" DefaultValue="4" Group="Memory Command" Name="RefParam_MEMORY_2_ReadDummyCycle" TabName="Memory 2" Type="integer" Unit="">
		<Description>selection of the driver type</Description>
		<Condition Expression="RefParam_EXTMEM_Number_of_Memory &gt;= 2 &amp; RefParam_MEMORY_2_Driver_Selection = EXTMEM_PSRAM" Diagnostic="requires the selection of a second memory"/>
	</RefParameter>

	<!-- Manage the memory configuration : PSRAM -->
	<RefParameter Added="true" Comment="Number of Config" DefaultValue="0" Group="Memory Configuration" Max="3" Min="0" Name="RefParam_MEMORY_2_NumberOfConfig" TabName="Memory 2" Type="integer" Unit="">
		<Description>selection of the driver type</Description>
		<Condition Expression="RefParam_EXTMEM_Number_of_Memory &gt;= 2 &amp; RefParam_MEMORY_2_Driver_Selection = EXTMEM_PSRAM" Diagnostic="requires the selection of a second memory"/>
	</RefParameter>
		<!-- config 1 -->
		<RefParameter Added="true" Comment="Write Mask" DefaultValue="0x40" Group="Configuration 1" Max="255" Min="0" Name="RefParam_MEMORY_2_Config1_WriteMask" TabName="Memory 2" Type="integer" Unit="hex">
			<Description>selection of the driver type</Description>
			<Condition Expression="RefParam_EXTMEM_Number_of_Memory &gt;= 2 &amp; RefParam_MEMORY_2_Driver_Selection = EXTMEM_PSRAM &amp; RefParam_MEMORY_2_NumberOfConfig &gt;= 1" Diagnostic="requires minimun 1 configuration selected"/>
		</RefParameter>
		<RefParameter Added="true" Comment="Write Value" DefaultValue="0x40" Group="Configuration 1" Max="255" Min="0" Name="RefParam_MEMORY_2_Config1_WriteValue" TabName="Memory 2" Type="integer" Unit="hex">
			<Description>selection of the driver type</Description>
			<Condition Expression="RefParam_EXTMEM_Number_of_Memory &gt;= 2 &amp; RefParam_MEMORY_2_Driver_Selection = EXTMEM_PSRAM &amp; RefParam_MEMORY_2_NumberOfConfig &gt;= 1" Diagnostic="requires minimun 1 configuration selected"/>
		</RefParameter>
		<RefParameter Added="true" Comment="Register Address" DefaultValue="0x08" Group="Configuration 1" Max="255" Min="0" Name="RefParam_MEMORY_2_Config1_RegAddress" TabName="Memory 2" Type="integer" Unit="hex">
			<Description>selection of the driver type</Description>
			<Condition Expression="RefParam_EXTMEM_Number_of_Memory &gt;= 2 &amp; RefParam_MEMORY_2_Driver_Selection = EXTMEM_PSRAM &amp; RefParam_MEMORY_2_NumberOfConfig &gt;= 1" Diagnostic="requires minimun 1 configuration selected"/>
		</RefParameter>
		<!-- config 2 -->
		<RefParameter Added="true" Comment="Write Mask" DefaultValue="0x00" Group="Configuration 2" Max="255" Min="0" Name="RefParam_MEMORY_2_Config2_WriteMask" TabName="Memory 2" Type="integer" Unit="hex">
			<Description>selection of the driver type</Description>
			<Condition Expression="RefParam_EXTMEM_Number_of_Memory &gt;= 2 &amp; RefParam_MEMORY_2_Driver_Selection = EXTMEM_PSRAM &amp; RefParam_MEMORY_2_NumberOfConfig &gt;= 2" Diagnostic="requires minimun 1 configuration selected"/>
		</RefParameter>
		<RefParameter Added="true" Comment="Write Value" DefaultValue="0x00" Group="Configuration 2" Max="255" Min="0" Name="RefParam_MEMORY_2_Config2_WriteValue" TabName="Memory 2" Type="integer" Unit="hex">
			<Description>selection of the driver type</Description>
			<Condition Expression="RefParam_EXTMEM_Number_of_Memory &gt;= 2 &amp; RefParam_MEMORY_2_Driver_Selection = EXTMEM_PSRAM &amp; RefParam_MEMORY_2_NumberOfConfig &gt;= 2" Diagnostic="requires minimun 1 configuration selected"/>
		</RefParameter>
		<RefParameter Added="true" Comment="Register Address" DefaultValue="0x00" Group="Configuration 2" Max="255" Min="0" Name="RefParam_MEMORY_2_Config2_RegAddress" TabName="Memory 2" Type="integer" Unit="hex">
			<Description>selection of the driver type</Description>
			<Condition Expression="RefParam_EXTMEM_Number_of_Memory &gt;= 2 &amp; RefParam_MEMORY_2_Driver_Selection = EXTMEM_PSRAM &amp; RefParam_MEMORY_2_NumberOfConfig &gt;= 2" Diagnostic="requires minimun 1 configuration selected"/>
		</RefParameter>
		<!-- config 1 -->
		<RefParameter Added="true" Comment="Write Mask" DefaultValue="0x00" Group="Configuration 3" Max="255" Min="0" Name="RefParam_MEMORY_2_Config3_WriteMask" TabName="Memory 2" Type="integer" Unit="hex">
			<Description>selection of the driver type</Description>
			<Condition Expression="RefParam_EXTMEM_Number_of_Memory &gt;= 2 &amp; RefParam_MEMORY_2_Driver_Selection = EXTMEM_PSRAM &amp; RefParam_MEMORY_2_NumberOfConfig &gt;= 3" Diagnostic="requires minimun 1 configuration selected"/>
		</RefParameter>
		<RefParameter Added="true" Comment="Write Value" DefaultValue="0x00" Group="Configuration 3" Max="255" Min="0" Name="RefParam_MEMORY_2_Config3_WriteValue" TabName="Memory 2" Type="integer" Unit="hex">
			<Description>selection of the driver type</Description>
			<Condition Expression="RefParam_EXTMEM_Number_of_Memory &gt;= 2 &amp; RefParam_MEMORY_2_Driver_Selection = EXTMEM_PSRAM &amp; RefParam_MEMORY_2_NumberOfConfig &gt;= 3" Diagnostic="requires minimun 1 configuration selected"/>
		</RefParameter>
		<RefParameter Added="true" Comment="Register Address" DefaultValue="0x00" Group="Configuration 3" Max="255" Min="0" Name="RefParam_MEMORY_2_Config3_RegAddress" TabName="Memory 2" Type="integer" Unit="hex">
			<Description>selection of the driver type</Description>
			<Condition Expression="RefParam_EXTMEM_Number_of_Memory &gt;= 2 &amp; RefParam_MEMORY_2_Driver_Selection = EXTMEM_PSRAM &amp; RefParam_MEMORY_2_NumberOfConfig &gt;= 3" Diagnostic="requires minimun 1 configuration selected"/>
		</RefParameter>

	<RefParameter Comment="RefParam_ClockProtection" Name="RefParam_ClockProtection" DefaultValue="+RCC_CP_XSPI+|RCC_CP_FMC" Type="string" Visible="false" >
		<Description></Description>
	</RefParameter>
	<RefParameter Comment="RCC_CP_XSPI" Name="RCC_CP_XSPI" DefaultValue="RCC_CLOCKPROTECT_XSPI" Type="string" Visible="false" >
		<Description></Description>	
		<Condition Expression="RefParam_MEMORY_1_Instance=XSPI1 | RefParam_MEMORY_1_Instance=XSPI2| ((RefParam_MEMORY_2_Instance=XSPI1 | RefParam_MEMORY_2_Instance=XSPI2) &amp;  RefParam_MEMORY_2_NumberOfConfig=2)" Diagnostic=""/>
	</RefParameter>
	<RefParameter Comment="RCC_CP_XSPI" Name="RCC_CP_XSPI" DefaultValue="" Type="string" Visible="false" />
	<RefParameter Comment="RCC_CP_FMC" Name="RCC_CP_FMC" DefaultValue="RCC_CLOCKPROTECT_FMC" Type="string" Visible="false" >
		<Description></Description>
		<Condition Expression="RefParam_MEMORY_1_Instance=FMC | (RefParam_MEMORY_2_Instance=FMC &amp; RefParam_MEMORY_2_NumberOfConfig=2)" Diagnostic=""/>
	</RefParameter>
	<RefParameter Comment="RCC_CP_FMC" Name="RCC_CP_FMC" DefaultValue="" Type="string" Visible="false" />
	
	<RefParameter Comment="ICF Application" DefaultValue="SEM_EXTMEM_ROMxspi1_RAMxspi2" Name="ICF_Application" Type="string">
		<PossibleValue Semaphore="SEM_EXTMEM_ROMxspi1_RAMxspi2" Comment="true" Value="true" />
		<Condition Expression="Sem_BOOT_XIP &amp; ((RefParam_MEMORY_1_Driver_Selection=EXTMEM_NOR_SFDP &amp; RefParam_MEMORY_1_Instance=XSPI1 &amp; RefParam_MEMORY_2_Driver_Selection=EXTMEM_PSRAM &amp; RefParam_MEMORY_2_Instance=XSPI2)|
													RefParam_MEMORY_1_Driver_Selection=EXTMEM_PSRAM &amp; RefParam_MEMORY_1_Instance=XSPI2 &amp; RefParam_MEMORY_2_Driver_Selection=EXTMEM_NOR_SFDP &amp; RefParam_MEMORY_2_Instance=XSPI1)" Diagnostic="" />
	</RefParameter>
	<RefParameter Comment="ICF Application" DefaultValue="SEM_EXTMEM_RAMxspi1_ROMxspi2" Name="ICF_Application" Type="string">
		<PossibleValue Semaphore="SEM_EXTMEM_RAMxspi1_ROMxspi2" Comment="true" Value="true" />
		<Condition Expression="Sem_BOOT_XIP &amp; ((RefParam_MEMORY_1_Driver_Selection=EXTMEM_NOR_SFDP &amp; RefParam_MEMORY_1_Instance=XSPI2 &amp; RefParam_MEMORY_2_Driver_Selection=EXTMEM_PSRAM &amp; RefParam_MEMORY_2_Instance=XSPI1)|
													RefParam_MEMORY_1_Driver_Selection=EXTMEM_PSRAM &amp; RefParam_MEMORY_1_Instance=XSPI1 &amp; RefParam_MEMORY_2_Driver_Selection=EXTMEM_NOR_SFDP &amp; RefParam_MEMORY_2_Instance=XSPI2)" Diagnostic="" />
	</RefParameter>
	<RefParameter Comment="ICF Application" DefaultValue="true" Name="ICF_Application" Type="string">
		<PossibleValue Semaphore="SEM_EXTMEM_ROMxspi1" Comment="true" Value="true" />
		<Condition Expression="(Sem_BOOT_XIP &amp; RefParam_MEMORY_1_Driver_Selection=EXTMEM_NOR_SFDP &amp; RefParam_MEMORY_1_Instance=XSPI1)|
								Sem_BOOT_LRUN &amp; ((RefParam_MEMORY_1_Driver_Selection=EXTMEM_SDCARD &amp; RefParam_LRUN_SRC_memory=EXTMEM1 &amp; RefParam_MEMORY_2_Driver_Selection=EXTMEM_PSRAM &amp; RefParam_MEMORY_2_Instance=XSPI1)|
													 (RefParam_MEMORY_2_Driver_Selection=EXTMEM_SDCARD &amp; RefParam_LRUN_SRC_memory=EXTMEM2 &amp; RefParam_MEMORY_1_Driver_Selection=EXTMEM_PSRAM &amp; RefParam_MEMORY_1_Instance=XSPI1)|
													 (RefParam_MEMORY_1_Driver_Selection=EXTMEM_NOR_SFDP &amp; RefParam_MEMORY_1_Instance=XSPI2 &amp; RefParam_LRUN_SRC_memory=EXTMEM1 &amp; RefParam_MEMORY_2_Driver_Selection=EXTMEM_PSRAM &amp; RefParam_MEMORY_2_Instance=XSPI1))" Diagnostic="" />
	</RefParameter>
	<RefParameter Comment="ICF Application" DefaultValue="true" Name="ICF_Application" Type="string">
		<PossibleValue Semaphore="SEM_EXTMEM_ROMxspi2" Comment="true" Value="true" />
		<Condition Expression="(Sem_BOOT_XIP &amp; RefParam_MEMORY_1_Driver_Selection=EXTMEM_NOR_SFDP &amp; RefParam_MEMORY_1_Instance=XSPI2)|
								Sem_BOOT_LRUN &amp; ((RefParam_MEMORY_1_Driver_Selection=EXTMEM_SDCARD &amp; RefParam_LRUN_SRC_memory=EXTMEM1 &amp; RefParam_MEMORY_2_Driver_Selection=EXTMEM_PSRAM &amp; RefParam_MEMORY_2_Instance=XSPI2)|
													 (RefParam_MEMORY_2_Driver_Selection=EXTMEM_SDCARD &amp; RefParam_LRUN_SRC_memory=EXTMEM2 &amp; RefParam_MEMORY_1_Driver_Selection=EXTMEM_PSRAM &amp; RefParam_MEMORY_1_Instance=XSPI2)|
													 (RefParam_MEMORY_1_Driver_Selection=EXTMEM_NOR_SFDP &amp; RefParam_MEMORY_1_Instance=XSPI1 &amp; RefParam_LRUN_SRC_memory=EXTMEM1 &amp; RefParam_MEMORY_2_Driver_Selection=EXTMEM_PSRAM &amp; RefParam_MEMORY_2_Instance=XSPI2)|
													 (RefParam_MEMORY_1_Driver_Selection=EXTMEM_PSRAM &amp; RefParam_MEMORY_1_Instance=XSPI1 &amp; RefParam_MEMORY_2_Driver_Selection=EXTMEM_NOR_SFDP &amp; RefParam_MEMORY_2_Instance=XSPI2  &amp; RefParam_LRUN_SRC_memory=EXTMEM2)|
													 (RefParam_MEMORY_1_Driver_Selection=EXTMEM_PSRAM &amp; RefParam_MEMORY_1_Instance=XSPI2 &amp; RefParam_MEMORY_2_Driver_Selection=EXTMEM_NOR_SFDP &amp; RefParam_MEMORY_2_Instance=XSPI1  &amp; RefParam_LRUN_SRC_memory=EXTMEM2))" Diagnostic="" />
	</RefParameter>
	<RefParameter Comment="ICF Application" DefaultValue="true" Name="ICF_Application" Type="string">
		<PossibleValue Semaphore="SEM_EXTMEM_sram" Comment="true" Value="true" />
		<Condition Expression="Sem_BOOT_LRUN &amp; (((RefParam_MEMORY_1_Driver_Selection=EXTMEM_NOR_SFDP &amp; RefParam_LRUN_SRC_memory=EXTMEM1) | (RefParam_MEMORY_2_Driver_Selection=EXTMEM_NOR_SFDP &amp; RefParam_LRUN_SRC_memory=EXTMEM2))|
													  RefParam_MEMORY_1_Driver_Selection=EXTMEM_SDCARD &amp; RefParam_LRUN_SRC_memory=EXTMEM1)" Diagnostic="" />
	</RefParameter>
	<RefParameter Comment="ICF Application" DefaultValue="" Name="ICF_Application" Type="string"/>

	<RefParameter Comment="ELOADER memory" DefaultValue="+EXTMEM_LOADER:RefParam_ELOADER_memory" Name="RefParam_ELOADER_memory" Type="string" Visible="false"/>
</IP>