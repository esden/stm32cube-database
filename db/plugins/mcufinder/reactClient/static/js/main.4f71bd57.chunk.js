/*! For license information please see main.4f71bd57.chunk.js.LICENSE.txt */
(this["webpackJsonpul-app-ts"]=this["webpackJsonpul-app-ts"]||[]).push([[0],{163:function(e,t,n){},167:function(e){e.exports=JSON.parse('{"a":"MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDlOJu6TyygqxfWT7eLtGDwajtNFOb9I5XRb6khyfD1Yt3YiCgQWMNW649887VGJiGr/L5i2osbl8C9+WJTeucF+S76xFxdU6jE0NQ+Z+zEdhUTooNRaY5nZiu5PgDB0ED/ZKBUSLKL7eibMxZtMlUDHjm4gwQco1KRMDSmXSMkDwIDAQAB"}')},181:function(e,t,n){},217:function(e,t,n){},238:function(e,t,n){},239:function(e,t){},267:function(e,t,n){},275:function(e,t,n){},309:function(e,t,n){"use strict";n.r(t);var i,a=n(0),o=n.n(a),r=n(23),s=n.n(r),c=(n(217),n(14)),l=n(15),d=n(30),u=n(17),p=n(16),h=n(4),v=n.n(h),m=n(11),f=n(189),w=n.n(f),O="https://api.ultralibrarian.com/api/v1",b=(n(238),n(326)),C=new b.a,A=new b.a,g=function(e,t,n,i,a,o,r,s,c,l,d,u,p,h){return C.next({status:e,threedModel:t,cadFormats:n,api:i,uid:a,rpn:o,footprintPreviews:r,symbolPreviews:s,cpn:c,terms:l,footprint_available:d,symbol_available:u,threed_available:p,messageToDisplay:h})},j=function(){return C.next()},y=function(){return C.asObservable()},E=function(){return C.unsubscribe()},T=function(e,t,n,i,a,o){return A.next({customFootprintPreviews:e,customSymbolPreviews:t,level:n,footprint_available:i,symbol_available:a,threed_available:o})},N=function(){return A.next()},S=function(){return A.asObservable()},_=function(){return A.unsubscribe()},x=n(166),D=n.n(x),P=n(167),I=n(327),R=n(323),k=n(199);!function(e){e.PinNameCAD="Pin name",e.ProjectNamingCAD="Project naming",e.DualCAD="Dual",e.ConfigMode="Pin Naming",e.ProxyRequired="This feature requires internet access. Please check your connection/proxy settings.",e.NoCADModels="Currently there are no CAD models. Stay tuned !",e.NO_INTERNET="Connection lost... Please check network status",e.CAD_TO_CHOOSE="Please choose CAD formats...",e.CPN_REQUIRED="Please choose a CPN",e.SYS_PROXY_MSG="CAD feature doesn't work with System proxy.",e.GUIDE_MSG='Please go to "Help" -> "Updater Settings" -> "Connections Parameters" -> "Manual Configuration of Proxy Server" -> "Check Connection"',e.TRY_LATER="Service is unavailable, please try again later...",e.NETWORK_REQUIRED="This feature requires network access (if you've just changed your connection settings, please consider restarting the application)"}(i||(i={}));var L=o.a.createRef(),M=o.a.createRef(),F=o.a.createRef(),U=o.a.createRef(),H=o.a.createRef(),B=o.a.createRef(),V=o.a.createRef(),G=o.a.createRef(),W=o.a.createRef(),Y=o.a.createRef(),z=(n(181),n(325)),J=n(1),Z=function(e){Object(u.a)(n,e);var t=Object(p.a)(n);function n(e){var i;return Object(c.a)(this,n),(i=t.call(this,e)).onCloseModal=function(){var e,t;i.setState({IsVisible:!1}),null===(e=i.props.closeRef)||void 0===e||null===(t=e.current)||void 0===t||t.click()},i.state={IsVisible:i.props.isOpened},i}return Object(l.a)(n,[{key:"render",value:function(){var e=this.state.IsVisible;return Object(J.jsx)("div",{children:Object(J.jsxs)(z.a,{show:e,onHide:this.onCloseModal.bind(this),scrollable:!0,centered:!0,backdrop:"static",size:"lg",style:{color:"#03234B"},children:[Object(J.jsx)(z.a.Header,{closeButton:!0,children:Object(J.jsx)(z.a.Title,{children:this.props.popupHeader})}),Object(J.jsx)(z.a.Body,{children:this.props.popUpBody}),Object(J.jsx)(z.a.Footer,{children:this.props.popUpFooter})]})})}}]),n}(o.a.Component),X=function(e){Object(u.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(c.a)(this,n);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).VALID_CHARS=/^[A-Za-z0-9_*-]+$/,e.FIX_COLOR="#E6007E",e.CORRECT_COLOR="#3cb4e6",e}return Object(l.a)(n,[{key:"cleanInvalidPinText",value:function(e){return e.replace(/[^A-Za-z0-9_*-]/g,"").replace(/ +/," ")}},{key:"highlightWhiteSpaces",value:function(e){return" "!==e?Object(J.jsx)("span",{style:{color:this.FIX_COLOR},children:e}):Object(J.jsx)("span",{style:{backgroundColor:this.FIX_COLOR},children:e})}},{key:"render",value:function(){var e=this,t=this.props.invalidPinText.split("");return Object(J.jsxs)("div",{children:[Object(J.jsx)("span",{children:"Pin text: "}),t.map((function(t){return e.VALID_CHARS.test(t)?Object(J.jsx)("span",{style:{color:e.CORRECT_COLOR},children:t}):e.highlightWhiteSpaces(t)})),Object(J.jsxs)("span",{children:[" ",this.props.sentence," "]}),Object(J.jsx)("ul",{children:Object(J.jsx)("li",{style:{color:this.CORRECT_COLOR},children:this.cleanInvalidPinText(this.props.invalidPinText)})})]})}}]),n}(o.a.Component),K=X,Q=function(e){Object(u.a)(n,e);var t=Object(p.a)(n);function n(e){var i;return Object(c.a)(this,n),(i=t.call(this,e)).VALID_CHARS=/^[A-Za-z0-9_*-]+$/,i.state={invalidCharsCount:i.countInvalidCharacters()},i}return Object(l.a)(n,[{key:"countInvalidCharacters",value:function(){var e=this,t=[];return this.props.pin_warnings.invalid_characters.map((function(n){n.pin_text.split("").map((function(n){if(!e.VALID_CHARS.test(n))return t.push(n)}))})),t.length}},{key:"render",value:function(){var e=this.state.invalidCharsCount;return Object(J.jsx)("div",{children:Object(J.jsx)(Z,{isOpened:this.props.isOpened,popupHeader:"Warning",popUpBody:Object(J.jsxs)("div",{className:"invalidPinBody",children:[Object(J.jsxs)("div",{className:"invalidCharacter",children:[Object(J.jsx)("h1",{children:"Invalid character "}),Object(J.jsx)("ol",{children:this.props.pin_warnings.invalid_characters.map((function(e){return Object(J.jsx)("p",{children:Object(J.jsx)("li",{children:Object(J.jsxs)("ul",{children:[Object(J.jsxs)("u",{children:["Pin position ",e.pin_position]}),Object(J.jsxs)("li",{children:[" Pin name : ",e.pin_name]}),Object(J.jsxs)("li",{children:[Object(J.jsx)(K,{invalidPinText:e.pin_text,sentence:"has been rendered as:"})," "]})]})})})}))})]}),Object(J.jsxs)("div",{className:"unmatched_pins",children:[this.props.pin_warnings.unmatched_pins.length?Object(J.jsx)("h1",{children:"Unmatched pin at "}):null,Object(J.jsx)("ol",{children:this.props.pin_warnings.unmatched_pins.map((function(e){return Object(J.jsx)("p",{children:Object(J.jsx)("li",{children:Object(J.jsxs)("ul",{children:[Object(J.jsxs)("u",{children:["Pin position ",e.pin_position]}),Object(J.jsxs)("li",{children:[Object(J.jsx)(K,{invalidPinText:e.pin_text,sentence:"has been rendered as:"})," "]})]})})})}))})]}),1===e?Object(J.jsxs)("p",{children:[Object(J.jsx)("span",{children:"That "}),Object(J.jsx)("span",{style:{color:"#E6007E"},children:" character"}),Object(J.jsx)("span",{children:" has been removed from CAD models and symbol previews"})]}):Object(J.jsxs)("p",{children:[Object(J.jsx)("span",{children:"Those "}),Object(J.jsxs)("span",{style:{color:"#E6007E"},children:[" ",e," characters"]}),Object(J.jsx)("span",{children:" have been removed from CAD models"})]})]}),popUpFooter:Object(J.jsx)("div",{children:this.props.btn}),closeRef:this.props.closeRef})})}}]),n}(o.a.Component),q=function(e){Object(u.a)(n,e);var t=Object(p.a)(n);function n(e){var i;return Object(c.a)(this,n),(i=t.call(this,e)).state={pinWarning:!1,pinWarningsArray:null,api:i.props.api},i}return Object(l.a)(n,[{key:"setPinsConfig",value:function(e){var t,n,a,o,r;(console.log(e.target.value),""!==window.CAD_CUSTOM_PIN_MAPPING&&"true"===window.PROJECT_CONSENT)?((null===(t=G.current)||void 0===t?void 0:t.checked)?(console.log("[Pin config component uid in use",this.props.uid),this.getCustomPreviews(this.props.api,this.props.uid,i.PinNameCAD)):(null===(n=W.current)||void 0===n?void 0:n.checked)?this.getCustomPreviews(this.props.api,this.props.uid,i.DualCAD):(null===(a=Y.current)||void 0===a?void 0:a.checked)&&this.getCustomPreviews(this.props.api,this.props.uid,i.ProjectNamingCAD),window.ioc.setPinConfig(window.CAD_PIN_CONFIG)):(window.CAD_PIN_CONFIG=(null===(o=G.current)||void 0===o?void 0:o.checked)?i.PinNameCAD:(null===(r=W.current)||void 0===r?void 0:r.checked)?i.DualCAD:i.ProjectNamingCAD,window.ioc.setPinConfig(window.CAD_PIN_CONFIG))}},{key:"getCustomPreviews",value:function(){var e=Object(m.a)(v.a.mark((function e(t,n,i){var a,o=this;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=this.selectWhichPinsConfig(i),e.abrupt("return",null===t||void 0===t?void 0:t.post("".concat(window.CAD_REST_API_CUSTOM_PREVIEWS_URL),{uid:n,pin_mappings:a},{headers:{Accept:"application/json","Content-Type":"application/json"}}).then((function(e){if(200===e.status){e.data.pin_warnings.invalid_characters.length|e.data.pin_warnings.unmatched_pins.length&&o.setState({pinWarning:!0,pinWarningsArray:e.data.pin_warnings});var t=Date.now().toString();return T(e.data.preview_data.footprint_previews,e.data.preview_data.symbol_previews,t,!0,!0,e.data.threed_available),e.data.preview_data.footprint_previews}})).catch((function(e){return console.log("[PinsConfig component] cannot post for previews",e),e})));case 2:case"end":return e.stop()}}),e,this)})));return function(t,n,i){return e.apply(this,arguments)}}()},{key:"selectWhichPinsConfig",value:function(e){var t;return null!=window.java&&void 0!=window.java&&(e===i.PinNameCAD?(t=window.java.getStandardPinsAsString(),console.log("EDA models in Pin name mode"),window.CAD_PIN_CONFIG=i.PinNameCAD):e===i.DualCAD?(t=window.java.getCustomPinsAsString(),console.log("EDA models in Dual mode"),window.CAD_PIN_CONFIG=i.DualCAD):e===i.ProjectNamingCAD&&(t=window.java.getOnlyCustomPinsAsString(),console.log("EDA models in Project naming mode"),window.CAD_PIN_CONFIG=i.ProjectNamingCAD)),JSON.parse(t)}},{key:"_hideWarning",value:function(){this.state.pinWarning?this.setState({pinWarning:!1}):this.setState({pinWarning:!0})}},{key:"render",value:function(){var e=""===window.CAD_CUSTOM_PIN_MAPPING||this.props.pinConfig===i.NoCADModels?{display:"none"}:void 0,t=this.state,n=t.pinWarning,a=t.pinWarningsArray,o=Object(J.jsx)(I.a,{ref:H,name:"warningBtn",variant:"default",style:{backgroundColor:"#3cb4e6",color:"white"},onClick:this._hideWarning.bind(this),children:"OK"});return Object(J.jsx)("div",{children:this.props.networkStatus?Object(J.jsxs)("div",{ref:V,onChange:this.setPinsConfig.bind(this),style:e,children:[Object(J.jsx)("p",{style:{marginBottom:"0.3em"},children:i.ConfigMode}),Object(J.jsx)(R.a,{placement:"bottom",overlay:Object(J.jsx)(k.a,{style:{backgroundColor:"#90989e",borderRadius:"0px"},children:Object(J.jsx)(k.a.Body,{style:{color:"#FFFFFF",textAlign:"center"},children:"Only pin names"})}),children:Object(J.jsxs)("span",{children:[Object(J.jsx)("input",{ref:G,type:"radio",value:"Pin name",name:"mode",style:{color:"#03234B",marginLeft:"0.5em",marginRight:"0.3em"}}),i.PinNameCAD]})}),Object(J.jsx)(R.a,{placement:"bottom",overlay:Object(J.jsx)(k.a,{style:{backgroundColor:"#90989e",borderRadius:"0px"},children:Object(J.jsxs)(k.a.Body,{style:{color:"#FFFFFF",textAlign:"center"},children:["Adding user label or signal by default (i.e:",Object(J.jsx)("strong",{children:"mycustomLabel"})," or"," ",Object(J.jsx)("strong",{children:"GPIO-OUTPUT"}),")"]})}),children:Object(J.jsxs)("span",{children:[Object(J.jsx)("input",{ref:Y,type:"radio",value:"Project naming",name:"mode",style:{marginLeft:"1em",marginRight:"0.3em",color:"#03234B"}}),i.ProjectNamingCAD]})}),Object(J.jsx)(R.a,{placement:"bottom",overlay:Object(J.jsx)(k.a,{style:{backgroundColor:"#90989e",borderRadius:"0px"},children:Object(J.jsxs)(k.a.Body,{style:{color:"#FFFFFF",textAlign:"center"},children:["Pin name + user label or signal by default (i.e:",Object(J.jsx)("strong",{children:"PA15-mycustomLabel"})," or"," ",Object(J.jsx)("strong",{children:"PA15-GPIO-OUTPUT"}),")."]})}),children:Object(J.jsxs)("span",{children:[Object(J.jsx)("input",{ref:W,defaultChecked:!0,type:"radio",value:"Dual",name:"mode",style:{marginLeft:"1em",marginRight:"0.3em",color:"#03234B"}}),i.DualCAD]})}),n?Object(J.jsx)("div",{children:null!==a&&!F.current&&Object(J.jsx)("div",{children:Object(J.jsx)(Q,{isOpened:n,pin_warnings:a,btn:o,closeRef:H})})}):null]}):null})}}]),n}(o.a.Component),$=q,ee=function(e){Object(u.a)(n,e);var t=Object(p.a)(n);function n(e,a){var o;return Object(c.a)(this,n),(o=t.call(this,e)).UL_API=O,o.sendULState=function(){var e=o.state,t=e.api,n=(e.uid,e.messageToDisplay);if(e.isToken)o.getAllApiData().then((function(e){var t=o.state,i=t.threedModel,a=t.cadFormats,r=t.api,s=t.uid,c=t.rpn,l=t.footprintPreviews,d=t.symbolPreviews,u=t.cpn,p=t.terms,h=t.threed_available,v=t.symbol_available,m=t.footprint_available;g(!0,i,a,r,s,c,l,d,u,p,m,v,h,n),o.setState({loading:!1})})).catch((function(e){console.debug("error when send data to App component")}));else{console.debug("NO data so send empty data");var i=o.state.cpn;g(!0,"",[],t,"","",[],[],i,"",!1,!1,!1,n)}},o.triggerActionOnCurrentCPN=function(e,t){try{o.getUidForGivenCPN(e,t).then((function(){return o.sendULState()}))}catch(n){}},o.state={rpn:"",uid:"1",api:null,symbolSVG:"",footPrintSVG:"",threedModel:"",cadFormats:[],zipFile:null,cpnList:[],projectLevel:!1,footprintPreviews:[],symbolPreviews:[],cpn:"",loading:!0,accessToApi:!0,terms:"",footprint_available:!1,symbol_available:!1,threed_available:!1,requestIntercept:null,responseIntercept:null,messageToDisplay:i.TRY_LATER,isToken:!0,token:""},o.startHTTPConnection=o.startHTTPConnection.bind(Object(d.a)(o)),o}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=Object(m.a)(v.a.mark((function e(){var t=this;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:setTimeout(Object(m.a)(v.a.mark((function e(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.connectULAPI().then((function(e){t.retrieveJAVAdata(e),t.retrieveJAVAdataOnNewSelection()}));case 1:case"end":return e.stop()}}),e)}))),500),this.startHTTPConnection(),window.addEventListener("online",this.startHTTPConnection),window.addEventListener("offline",this.startHTTPConnection);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){var e=this.state,t=e.requestIntercept,n=e.responseIntercept,i=e.api;null!==t&&(null===i||void 0===i||i.interceptors.request.eject(t)),null!==n&&(null===i||void 0===i||i.interceptors.response.eject(n)),E(),window.removeEventListener("online",this.startHTTPConnection),window.removeEventListener("offline",this.startHTTPConnection)}},{key:"startHTTPConnection",value:function(){var e=this,t=this.state.token;"online"===(navigator.onLine?"online":"offline")&&null===t&&this.connectULAPI().then((function(t){e.retrieveJAVAdata(t),e.retrieveJAVAdataOnNewSelection()}))}},{key:"retrieveJAVAdataOnNewSelection",value:function(){var e=this,t=this.state.isToken?"":null;window.retrieveJAVAdata=function(){e.retrieveJAVAdata(t)}}},{key:"connectULAPI",value:function(){var e=Object(m.a)(v.a.mark((function e(){var t,n,i,a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getOAuthToken();case 2:if(t=e.sent,this.setState({token:t}),e.prev=4,n=w.a.create({baseURL:window.CAD_REST_API_URL,headers:{Authorization:"Bearer ".concat(t),"Content-Type":"application/x-www-form-urlencoded","Access-Control-Allow-Origin":"*"}}),null==t){e.next=14;break}return e.next=9,this.requestInterceptor(n);case 9:return i=e.sent,e.next=12,this.responsetInterceptor(n);case 12:a=e.sent,this.setState({requestIntercept:i,responseIntercept:a});case 14:return this.setState({api:n}),console.log("[UlApiManager component] Connected to ".concat(window.CAD_PROVIDER_COMPANY_NAME," API")),e.abrupt("return",t);case 19:throw e.prev=19,e.t0=e.catch(4),this.setState({api:null,accessToApi:!1}),new Error("No Api access");case 23:case"end":return e.stop()}}),e,this,[[4,19]])})));return function(){return e.apply(this,arguments)}}()},{key:"requestInterceptor",value:function(){var e=Object(m.a)(v.a.mark((function e(t){var n,i=this;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.state.token,n=t.interceptors.request.use(function(){var e=Object(m.a)(v.a.mark((function e(n){var a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.headers.Authorization.includes("null")){e.next=9;break}return e.next=3,i.getOAuthToken();case 3:a=e.sent,n.headers.Authorization="Bearer ".concat(a),t.defaults.headers.Authorization="Bearer ".concat(a),i.setState({api:t,token:a}),e.next=9;break;case 9:return e.abrupt("return",n);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),(function(e){return Promise.reject(e)})),e.abrupt("return",n);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"responsetInterceptor",value:function(){var e=Object(m.a)(v.a.mark((function e(t){var n,i=this;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.state.token,n=t.interceptors.response.use((function(e){return e}),function(){var e=Object(m.a)(v.a.mark((function e(n){var a,o,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=null===n||void 0===n?void 0:n.config,401!==(null===n||void 0===n||null===(a=n.response)||void 0===a?void 0:a.status)||(null===o||void 0===o?void 0:o.sent)){e.next=11;break}return console.debug("Token has expired"),o.sent=!0,e.next=6,i.getOAuthToken();case 6:return r=e.sent,o.headers.Authorization="Bearer ".concat(r),t.defaults.headers.Authorization="Bearer ".concat(r),i.setState({api:t,token:r}),e.abrupt("return",t(o));case 11:return e.abrupt("return",Promise.reject(n));case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.abrupt("return",n);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getOAuthToken",value:function(){var e=Object(m.a)(v.a.mark((function e(){var t,n,a,o;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.getInfo(window.CAD_SSO_CLIENT_ID_encrypted,P.a),n=this.getInfo(window.CAD_SSO_CLIENT_SECRET_encrypted,P.a),console.info("[UlApiManager component] Connecting to SSO"),e.prev=3,e.next=6,fetch(window.CAD_SSO_URL,{method:"POST",body:"grant_type=client_credentials&client_id=".concat(t,"&client_secret=").concat(n),headers:{"Content-Type":"application/x-www-form-urlencoded","Access-Control-Allow-Origin":"*"}});case 6:return a=e.sent,e.next=9,a.json();case 9:return o=e.sent,console.log("[UlApiManager component] Connected to ".concat(window.CAD_PROVIDER_COMPANY_NAME," SSO")),this.setState({isToken:!0}),e.abrupt("return",o.access_token);case 15:return e.prev=15,e.t0=e.catch(3),this.setState({accessToApi:!1,messageToDisplay:i.NETWORK_REQUIRED}),console.trace("SSO unavailable because of",e.t0),e.abrupt("return",null);case 20:case"end":return e.stop()}}),e,this,[[3,15]])})));return function(){return e.apply(this,arguments)}}()},{key:"getInfo",value:function(e,t){return D.a.AES.decrypt(e,t).toString(D.a.enc.Utf8)}},{key:"setFetchTimeOut",value:function(){var e=new AbortController;return setTimeout((function(){return e.abort()}),5e3),e}},{key:"getUidForGivenCPN",value:function(){var e=Object(m.a)(v.a.mark((function e(t,n){var a,o=this;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",null===(a=this.state.api)||void 0===a?void 0:a.get("".concat(window.CAD_REST_API_UID_URL).concat(n)).then((function(e){if(e.data&&null!==t)if(e.data.has_cad_models){var n=e.data.part_data;o.setState({uid:n.uid,loading:!1,threed_available:n.threed_available,symbol_available:n.symbol_available,footprint_available:n.footprint_available,messageToDisplay:""})}else e.data.has_cad_models||(console.debug("Supposed to be in proxy env"),"system"===window.proxy.getProxy()?o.setState({uid:"",loading:!1,cpn:"",messageToDisplay:i.SYS_PROXY_MSG}):o.setState({uid:"",loading:!1,cpn:"",messageToDisplay:i.NoCADModels}));else console.debug("No proxy get in else block"),o.setState({uid:"",loading:!1,cpn:"",messageToDisplay:i.TRY_LATER})})).catch((function(e){return console.debug("No network connection"),o.setState({uid:"",loading:!1,cpn:"",messageToDisplay:i.NO_INTERNET}),e})));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getSymbolSVG",value:function(){var e=Object(m.a)(v.a.mark((function e(){var t,n=this;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",null===(t=this.state.api)||void 0===t?void 0:t.get("".concat(window.CAD_REST_API_SYMBOL_VIEW_URL).concat(this.state.uid)).then((function(e){return n.setState({symbolSVG:e.data}),e.data})).catch((function(e){return e})));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getFootprintPreviews",value:function(){var e=Object(m.a)(v.a.mark((function e(){var t,n=this;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",null===(t=this.state.api)||void 0===t?void 0:t.get("".concat(window.CAD_REST_API_PARTS_URL).concat(this.state.uid).concat(window.CAD_REST_API_FOOTPRINT_PREVIEWS_URL_PARAM)).then((function(e){return n.setState({footprintPreviews:e.data.preview_data.footprint_previews}),e.data.preview_data.footprint_previews})).catch((function(e){return console.debug("cannot set footprint previews state",e),e})));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getSymbolPreviews",value:function(){var e=Object(m.a)(v.a.mark((function e(){var t,n=this;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",null===(t=this.state.api)||void 0===t?void 0:t.get("".concat(window.CAD_REST_API_PARTS_URL).concat(this.state.uid).concat(window.CAD_REST_API_SYMBOL_PREVIEWS_URL_PARAM)).then((function(e){return n.setState({symbolPreviews:e.data.preview_data.symbol_previews}),e.data.preview_data.symbol_previews})).catch((function(e){return console.error("cannot set symbol previews state",e),e})));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getFootprintSVG",value:function(){var e,t=this;return null===(e=this.state.api)||void 0===e?void 0:e.get("".concat(window.CAD_REST_API_FOOTPRINT_VIEW_URL).concat(this.state.uid)).then((function(e){return t.setState({footPrintSVG:e.data}),e.data})).catch((function(e){return e}))}},{key:"getThreedModel",value:function(){var e,t=this;return null===(e=this.state.api)||void 0===e?void 0:e.get("".concat(window.CAD_REST_API_THREE_D_MODEL_URL).concat(this.state.uid)).then((function(e){return t.setState({threedModel:e.data.threed_preview_url}),e.data})).catch((function(e){return e}))}},{key:"getCADFormats",value:function(){var e=Object(m.a)(v.a.mark((function e(){var t,n=this;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",null===(t=this.state.api)||void 0===t?void 0:t.get("".concat(window.CAD_REST_API_CAD_FORMATS_URL).concat(this.state.uid)).then((function(e){return n.setState({cadFormats:e.data}),e.data})).catch((function(e){return e})));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getTermsAndConditions",value:function(){var e,t=this;return null===(e=this.state.api)||void 0===e?void 0:e.get("".concat(window.CAD_REST_API_TERMS_AND_CONDITIONS_URL)).then((function(e){return t.setState({terms:e.data.terms}),window.CAD_REST_API_PIN_TERMS=e.data.terms,e.data.terms})).catch((function(e){return e}))}},{key:"downloadZipCADFiles",value:function(){var e=Object(m.a)(v.a.mark((function e(t){var n,i,a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i={uid:this.state.uid,export_format_ids:t,export_options:[]},e.next=3,null===(n=this.state.api)||void 0===n?void 0:n.post("/export",{chosenCADFormats:i},{responseType:"arraybuffer"}).catch((function(e){return e}));case 3:a=e.sent,this.setState({zipFile:null===a||void 0===a?void 0:a.data});case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"retrieveJAVAdata",value:function(){var e=Object(m.a)(v.a.mark((function e(t){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:""!==window.CAD_CUSTOM_PIN_MAPPING?this.setState({projectLevel:!0}):this.setState({projectLevel:!1}),window.CAD_SELECTED_CPN?(this.setState({cpn:window.CAD_SELECTED_CPN}),this.triggerActionOnCurrentCPN(t,window.CAD_SELECTED_CPN)):this.setState({cpn:""});case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"keepRefNameMatches",value:function(e,t){console.log("size before split ",e.length);var n=new RegExp("^"+t.replace("x",".+")),i=e.filter((function(e){return n.test(e.mpn)&&(e.symbol_available||e.footprint_available||e.threed_available)}));return console.log("match resp",i.length),i}},{key:"getAllApiData",value:function(){var e=Object(m.a)(v.a.mark((function e(){var t,n,i;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.state,n=t.api,i=t.uid,null===n||""===i){e.next=5;break}return e.abrupt("return",Promise.all([this.getFootprintSVG(),this.getSymbolSVG(),this.getThreedModel(),this.getCADFormats(),this.getFootprintPreviews(),this.getSymbolPreviews(),this.getTermsAndConditions()]));case 5:console.debug("Cannot get data because API not available");case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=(e.loading,e.accessToApi,e.api),n=e.uid,i=e.projectLevel,a=e.messageToDisplay;return Object(J.jsxs)("div",{className:"loading",style:{display:"grid",gridTemplateColumns:"repeat(6, 1fr)",gridTemplateRows:"repeat(1, 1fr)",columnGap:"0.7em"},children:[Object(J.jsx)("h1",{style:{color:"#03234B",gridColumn:"3 / 5"},children:window.CAD_SELECTED_CPN}),i&&Object(J.jsx)("div",{style:{gridColumn:"5/7"},children:this.props.networkStatus&&i?Object(J.jsx)($,{api:t,uid:n,networkStatus:this.props.networkStatus,pinConfig:a},n):null})]})}}]),n}(o.a.Component),te=ee,ne=(n(267),n(149));function ie(){return ie=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},ie.apply(this,arguments)}function ae(e,t){if(null==e)return{};var n,i,a=function(e,t){if(null==e)return{};var n,i,a={},o=Object.keys(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var oe=a.createElement("g",{fill:"#03234b"},a.createElement("path",{d:"M370.27 91.029H129.73c-21.34 0-38.701 17.361-38.701 38.701v240.54c0 21.34 17.361 38.701 38.701 38.701h240.54c21.34 0 38.701-17.361 38.701-38.701V129.729c0-21.339-17.361-38.7-38.701-38.7zM262.52 391.58h-9.072V265.83a5.425 5.425 0 0 0-5.425-5.425h-24.46c-.639-3.093-1.822-5.981-3.403-8.603-1.104-1.884-2.352-3.589-4.707-5.576-2.925-2.468-5.938-4.88-9.535-6.187a27.591 27.591 0 0 0-12.031-1.522c-13.443 1.259-24.167 12.428-24.918 25.909-.888 15.932 11.819 29.177 27.562 29.177 7.178 0 13.705-2.777 18.62-7.285a11.147 11.147 0 0 0 4.238-4.862 27.474 27.474 0 0 0 4.231-10.202h18.98V391.58h-8.371v-58.354a5.425 5.425 0 0 0-5.425-5.425h-34.885c-2.704-13.536-15.331-23.535-29.949-22.043-13.345 1.362-23.945 12.52-24.678 25.915-.871 15.919 11.83 29.148 27.563 29.148 6.764 0 12.959-2.455 17.765-6.508a11.165 11.165 0 0 0 3.366-3.37 27.512 27.512 0 0 0 5.93-12.293h29.463v52.93h-93.65c-11.769 0-21.309-9.541-21.309-21.309V222.447h154.1V391.58zm-47.924-125.583c0 9.962-8.104 18.067-18.066 18.067s-18.067-8.105-18.067-18.067 8.105-18.067 18.067-18.067 18.066 8.105 18.066 18.067zm-29.675 67.219c0 9.962-8.104 18.066-18.066 18.066s-18.067-8.104-18.067-18.066 8.105-18.067 18.067-18.067c9.963 0 18.066 8.105 18.066 18.067zm206.658 37.054c0 11.769-9.541 21.31-21.31 21.31h-76.833v-87.999h38.008c2.076 13.181 13.48 23.304 27.236 23.304 15.22 0 27.604-12.383 27.604-27.605 0-15.222-12.384-27.605-27.604-27.605-6.827 0-13.072 2.505-17.896 6.626a11.143 11.143 0 0 0-3.11 3.112 27.507 27.507 0 0 0-5.782 11.318h-43.881a5.424 5.424 0 0 0-5.424 5.424v93.423h-9.218V217.023a5.424 5.424 0 0 0-5.424-5.424H108.421V129.73c0-11.769 9.54-21.309 21.309-21.309h111.733v57.366h-35.728c-.979-6.292-4.078-12.002-8.891-16.298-5.502-4.909-12.593-7.38-19.947-6.964-7.362.418-14.121 3.679-19.03 9.18-4.909 5.501-7.383 12.585-6.964 19.947.834 14.665 13.033 26.038 27.544 26.038.525 0 1.054-.015 1.585-.045 12.396-.705 22.433-9.532 25.244-21.01h41.612a5.425 5.425 0 0 0 5.425-5.425v-62.79h62.789v100.042a27.463 27.463 0 0 0-10.213 4.613 11.12 11.12 0 0 0-5.666 5.5c-3.603 4.664-5.771 10.491-5.771 16.826 0 15.222 12.384 27.605 27.606 27.605 15.22 0 27.604-12.383 27.604-27.605 0-7.622-3.106-14.531-8.117-19.531a11.057 11.057 0 0 0-1.672-1.519 27.488 27.488 0 0 0-12.922-6.094V108.42h44.32c11.769 0 21.309 9.541 21.309 21.309V370.27zm-50.966-70.989c0-9.962 8.105-18.066 18.067-18.066s18.066 8.104 18.066 18.066-8.104 18.067-18.066 18.067c-9.961 0-18.067-8.105-18.067-18.067zM179.489 188.123c-9.94.551-18.499-7.066-19.064-17.012a17.95 17.95 0 0 1 4.558-13.055 17.954 17.954 0 0 1 12.455-6.008c4.8-.286 9.453 1.344 13.055 4.557a17.95 17.95 0 0 1 6.008 12.455c.565 9.945-7.067 18.497-17.012 19.063zm141.568 29.213c9.962 0 18.066 8.105 18.066 18.067s-8.104 18.067-18.066 18.067-18.067-8.105-18.067-18.067 8.105-18.067 18.067-18.067zM409.082 325.836H475v28.28h-65.918zM409.082 265.852H475v28.28h-65.918zM409.082 205.859h65.917v28.28h-65.917zM409.082 145.875H475v28.28h-65.918zM25 325.836h65.917v28.28H25zM25 265.852h65.917v28.28H25zM25 205.859h65.917v28.28H25zM25 145.875h65.917v28.28H25zM145.879 409.083h28.279v65.921h-28.279zM205.868 409.083h28.28v65.913h-28.28zM265.857 409.083h28.279v65.922h-28.279zM325.843 409.083h28.28v65.913h-28.28zM145.879 24.996h28.279v65.921h-28.279zM205.868 25.005h28.28v65.912h-28.28zM265.857 24.995h28.279v65.922h-28.279zM325.843 24.995h28.28v65.922h-28.28z"}));function re(e,t){var n=e.title,i=e.titleId,o=ae(e,["title","titleId"]);return a.createElement("svg",ie({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 500 500",ref:t,"aria-labelledby":i},o),n?a.createElement("title",{id:i},n):null,oe)}var se=a.forwardRef(re),ce=(n.p,n(163),n(324)),le=function(e){Object(u.a)(n,e);var t=Object(p.a)(n);function n(e){var i;return Object(c.a)(this,n),(i=t.call(this,e)).previewDiv=void 0,i.previewSymbol=void 0,i.NO_SIGNAL_PREVIEWS=/.+_.+_[0-9]+/,i.MATCHING_PREVIEWS=i.props.symbolPreviews.filter((function(e){return e.name.match(i.NO_SIGNAL_PREVIEWS)})),i.onCropChange=function(e){i.setState({crop:e})},i.onCropComplete=function(e,t){},i.changeSymbolNames=function(){var e=Object(m.a)(v.a.mark((function e(t){var n,a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=i.props.symbolPreviews.filter((function(e){return e.type===t.target.textContent})),i.setState({symbolArrayNames:n}),a=n[0].data,i.setState({imageTodisplay:a});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),i.displayImageFromNameSelection=function(){var e=Object(m.a)(v.a.mark((function e(t){var n,a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=i.state.symbolArrayNames,a=n.filter((function(e){return e.name===t.target.textContent})),i.setState({imageTodisplay:a[0].data});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),i.onZoomChange=function(e){i.setState({zoom:e})},i.state={crop:{x:0,y:0},zoom:1,aspect:1.6,symbolArrayTypes:e.symbolPreviews.map((function(e){return e.type})).filter((function(e,t,n){return n.indexOf(e)===t})),symbolArrayNames:e.symbolPreviews.filter((function(t){return t.type===e.symbolPreviews[0].type})),imageTodisplay:i.MATCHING_PREVIEWS.length?i.MATCHING_PREVIEWS[0].data:e.symbolPreviews[0].data},i.previewDiv=o.a.createRef(),i.previewSymbol=o.a.createRef(),i}return Object(l.a)(n,[{key:"componentDidMount",value:function(){}},{key:"componentDidUpdate",value:function(){}},{key:"render",value:function(){var e=this.state,t=e.crop,n=e.zoom,i=e.aspect,a=e.symbolArrayNames,o=e.symbolArrayTypes,r=e.imageTodisplay,s=a.sort((function(e,t){return e.name.localeCompare(t.name)})).map((function(e){return{key:e.name,text:e.name,value:e.name}})),c=o.map((function(e){return{key:e,text:e,value:e}}));return Object(J.jsxs)("div",{className:"view",ref:this.previewDiv,children:[Object(J.jsxs)("div",{className:"title",children:[Object(J.jsx)(se,{style:{width:"4em",height:"2.5em"}}),Object(J.jsx)("h1",{style:{color:"#03234B"},children:this.props.previewName})]}),Object(J.jsx)("div",{className:"symbol",ref:this.previewSymbol,children:Object(J.jsx)(ne.a,{image:"data:image/svg+xml;base64,".concat(btoa(unescape(encodeURIComponent(r)))),crop:t,zoom:n,aspect:i,onCropChange:this.onCropChange,onZoomChange:this.onZoomChange,onCropComplete:this.onCropComplete,maxZoom:7,disableAutomaticStylesInjection:!0,showGrid:!1})}),Object(J.jsxs)("div",{className:"symbolSelection",children:[Object(J.jsx)("div",{className:"firstViewselect",children:Object(J.jsx)(ce.a,{onChange:this.changeSymbolNames,fluid:!0,selection:!0,options:c,defaultValue:c[0].value})}),Object(J.jsx)("div",{className:"secondViewselect",children:Object(J.jsx)(ce.a,{onChange:this.displayImageFromNameSelection,fluid:!0,selection:!0,options:s,defaultValue:this.MATCHING_PREVIEWS.length?this.MATCHING_PREVIEWS[0].name:this.props.symbolPreviews[0].name})})]})]})}}]),n}(o.a.Component),de=le,ue=n(52),pe=(n(275),n(195));function he(){return he=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},he.apply(this,arguments)}function ve(e,t){if(null==e)return{};var n,i,a=function(e,t){if(null==e)return{};var n,i,a={},o=Object.keys(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function me(e,t){var n=e.title,i=e.titleId,o=ve(e,["title","titleId"]);return a.createElement("svg",he({style:{width:"2em",marginLeft:"0.8em"},viewBox:"0 0 18 19",ref:t,"aria-labelledby":i},o),n?a.createElement("title",{id:i},n):null,a.createElement("g",{fill:"#03234b"},a.createElement("path",{d:"M12.494 3.6h3.856v13.14H1.65V3.6h3.856V2H0v16.318h18V2h-5.506z",style:{fill:"#ffffff"}}),a.createElement("path",{d:"M8.19 0v9.265L6.979 7.833 6.215 9.1l2.849 2.74 2.849-2.74-.829-1.267L9.81 9.265V0z",style:{fill:"#ffffff"}})))}var fe=a.forwardRef(me),we=(n.p,n(143)),Oe=n.n(we),be=n(328),Ce=n(121),Ae=n(113),ge=n(198),je=n(169),ye=n(97),Ee=n(196),Te=function(e){Object(u.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(c.a)(this,n);for(var i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return(e=t.call.apply(t,[this].concat(a))).consentCheckBox=o.a.createRef(),e.TERMS_AND_CONDITIONS_HEADER="".concat(window.CAD_PROVIDER_COMPANY_NAME," Terms and Conditions"),e.TERMS_AND_CONDITIONS_GENERIC_ACCESS=Object(J.jsxs)("div",{children:[Object(J.jsx)("p",{children:"Ultra Librarian\xae End User Subscription Agreement"}),Object(J.jsx)("p",{children:"THIS IS A LEGAL AGREEMENT BETWEEN YOU AS THE END USER AND EMA DESIGN AUTOMATION\xae, INC. BY DOWNLOADING ECAD SYMBOLS, PCB FOOTPRINTS, STEP MODELS, AND ACCOMPANYING MATERIALS, IN WRITTEN, ELECTRONIC OR ANY OTHER FORMAT, (THE \u201cCONTENT\u201d) FROM THE ULTRA LIBRARIAN\xae WEB SITE YOU ARE AGREEING TO BE BOUND BY THESE TERMS AND CONDITIONS OF USE, ALL APPLICABLE LAWS AND REGULATIONS, AND AGREE THAT YOU ARE RESPONSIBLE FOR COMPLIANCE WITH ANY APPLICABLE LOCAL LAWS. IF YOU DO NOT AGREE WITH ANY OF THESE TERMS, YOU ARE PROHIBITED FROM DOWNLOADING CONTENT. THE CONTENT IS PROTECTED BY APPLICABLE COPYRIGHT AND TRADEMARK LAW."}),Object(J.jsxs)("ol",{children:[Object(J.jsxs)("li",{children:[Object(J.jsx)("u",{children:"Grant of Rights"}),". For so long as you comply with the terms of this Agreement, EMA grants you the nonexclusive and nontransferable (except as specifically authorized herein) limited right to use the Ultra Librarian Web Site for download of CONTENT. Your use is restricted solely to downloading and using CONTENT exclusively within ECAD, PCB and MCAD systems and for the design of electronic circuits, PC boards or other systems only. Any other use of the CONTENT is prohibited. EMA reserves the right to terminate your rights under this Agreement and to seek any other legal remedies if you violate any provisions hereof and in the event of such termination and at all times, EMA and/or its licensors own and shall retain all rights, title and interest in and to the CONTENT, including all patents, patent rights, copyrights, trade secrets, service marks, and trademarks, and any applications for any of the foregoing, in all countries in the world embodied therein, and you shall have no rights with respect thereto. If you are not a registered or authorized user, you are not permitted to download CONTENT from the online library for any purpose. If you nevertheless gain access to the CONTENT without registration and authorization, your access and use will be governed by this Agreement and you will be liable to EMA for any breach as well as for the appropriate payment for use. EMA may limit quantities of CONTENT available from the online library and may reject any download or any part of a download."]}),Object(J.jsxs)("li",{children:[Object(J.jsx)("u",{children:"Usage"}),". Registration is required to download CONTENT from the Ultra Librarian website (\u201cWebsite\u201d) either directly or linked from a partner website. You are authorized to download the CONTENT. You may incorporate the CONTENT that you are authorized to access into your products or designs which may be distributed without restriction, including for commercial, educational, and open-source purposes. You may not use CONTENT for publishing or creating a library or libraries for sale or distribution for commercial purposes or enabling third parties to do the same. You may only use the CONTENT as permitted by law, including applicable export and re-export laws and regulations. You are responsible for all use of the CONTENT accessed with respect to your registration code. You do not have authorization to use the CONTENT if you are on any denied or debarred entity list."]}),Object(J.jsxs)("li",{children:[Object(J.jsx)("u",{children:"Copyright"}),". The CONTENT is owned by EMA and is the confidential and proprietary property of EMA or third parties from whom EMA has obtained rights and are protected by United States copyright laws and international treaty provisions. You acknowledge that EMA or any third parties from whom EMA has obtained rights are the sole and exclusive owners of all right, title and interest, including all trademarks, copyrights, patents, trade names, trade secrets and other intellectual property rights. You may not modify, conceal, or remove copyright notices from the CONTENT. You agree to take all reasonable steps and to exercise due diligence to protect the CONTENT and the accompanying materials from unauthorized reproduction, publication, or distribution, except as outlined in this Agreement."]}),Object(J.jsxs)("li",{children:[Object(J.jsx)("u",{children:"Termination"}),". EMA reserves the right to terminate your access and to seek any other legal remedies upon default by you of this Agreement. Your failure to perform your obligations hereunder, including without limitation, timely payment in full of all fees or the insolvency, bankruptcy, reorganization, assignment for the benefit of creditors, dissolution, liquidation, or winding up of the business shall constitute a default under this Agreement."]}),Object(J.jsxs)("li",{children:[Object(J.jsx)("u",{children:"Obligations on Termination or Expiration"}),". Upon termination or expiration of this Agreement, you shall immediately discontinue downloading CONTENT. Your obligations with respect to the CONTENT will survive the termination or expiration of this Agreement."]}),Object(J.jsxs)("li",{children:[Object(J.jsx)("u",{children:"Warranty"}),". THE CONTENT IS PROVIDED ON AN \u201cAS IS\u201d BASIS. WE DO NOT WARRANT THAT THE CONTENT OR THE FUNCTION PERFORMED BY THE WEBSITE WILL BE SECURED, WITHOUT INTERRUPTIONS OR DELAYS OR ERROR FREE. WE MAKE NO WARRANTY OR MAKE ANY REPRESENTATIONS CONCERNING THE ACCURACY OR RELIABILITY OF THE CONTENT. WE DISCLAIM ALL WARRANTIES, EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION THE IMPLIED WARRANTIES OF MERCHANTABILITY, NON-INFRINGEMENT OF THIRD PARTY PROPRIETARY RIGHTS, AND FITNESS FOR A PARTICULAR PURPOSE, RELATED TO THE CONTENT."]}),Object(J.jsxs)("li",{children:[Object(J.jsx)("u",{children:"Limitation of Liability"}),". YOU ASSUME ALL RESPONSIBILITY AND RISK FOR THE USE OF THE WEBSITE, CONTENT DOWNLOADED, AND THE INTERNET GENERALLY. TO THE MAXIMUM EXTENT PERMITTED BY LAW IN NO EVENT SHALL EMA OR ITS SUPPLIERS BE LIABLE FOR ANY CONSEQUENTIAL, INDIRECT, INCIDENTAL OR SPECIAL DAMAGES OR ANY OTHER DAMAGES WHATSOEVER (INCLUDING, BUT NOT LIMITED TO, DAMAGES FOR LOSS OF BUSINESS PROFITS, BUSINESS INTERRUPTION, LOSS OF BUSINESS INFORMATION, OR OTHER PECUNIARY LOSS) ARISING OUT OF THE USE OF OR INABILITY TO USE THE CONTENT, EVEN IF EMA HAS BEEN ADVISED OF THE POSSIBILITY OF SUCH DAMAGES REGARDLESS OF THE LEGAL THEORY ASSERTED. IN NO EVENT SHALL EMA\u2019S LIABILITY IN CONNECTION WITH THE USE OF THE CONTENT AND ANY ACCOMPANYING ITEMS EXCEED THE SUBSCRIPTION FEE PAID FOR ACCESS TO THE CONTENT IN THE LAST 365 DAYS. ALTHOUGH WE BELIEVE THE CONTENT TO BE ACCURATE, COMPLETE, AND CURRENT, WE MAKE NO WARRANTY AS TO THE ACCURACY OR COMPLETENESS OR CURRENCY OF THE CONTENT. IT IS YOUR RESPONSIBILITY TO VERIFY ANY INFORMATION BEFORE RELYING ON IT. THE CONTENT MAY INCLUDE TECHNICAL INACCURACIES OR TYPOGRAPHICAL ERRORS. WE MAY MAKE CHANGES TO THE CONTENT AT ANY TIME AND WITHOUT NOTICE."]}),Object(J.jsxs)("li",{children:[Object(J.jsx)("u",{children:"Force Majeure"}),". EMA shall not be liable for any loss, damage, or penalty resulting from delay due to causes beyond its control, including, without limitation, delays by its suppliers or internet service providers."]}),Object(J.jsxs)("li",{children:[Object(J.jsx)("u",{children:"Export Laws"}),". You agree that you will not export or re-export the CONTENT, in any form, without appropriate United States and foreign government license or permit, as necessary and will indemnify EMA against any loss related to your failure to conform to these requirements. You also agree that your obligations under this section will survive and continue after any termination or revocation of rights under this Agreement."]}),Object(J.jsxs)("li",{children:[Object(J.jsx)("u",{children:"Other"}),". You agree to submit to exclusive jurisdiction in the federal and state courts of the State of New York, USA. This agreement shall be interpreted pursuant to the laws of the State of New York without regard to principles of conflicts of laws. If any condition or clause of this Agreement shall be found to be invalid or unenforceable, all remaining conditions shall remain in full force and effect. A waiver of any condition or breach of condition of this Agreement in any one instance does not constitute a waiver of the condition or any subsequent breach. This document constitutes the entire agreement between the parties and supersedes any prior written or oral understandings. The Website and CONTENT may be enhanced, added to, withdrawn, or otherwise changed by EMA at any time without notice. These terms and conditions of use can be changed by EMA at any time and will apply prospectively. Continued use of the Website or downloading CONTENT following any changes constitutes acceptance of any changes. In the event EMA brings legal action against you to enforce the terms of this Agreement, EMA shall be entitled to recover reasonable attorney\u2019s fees and expenses for any proceeding, at or before trial and upon appeal, in addition to any other relief deemed appropriate by the Court."]})]}),Object(J.jsx)("p",{children:"2020 All rights reserved EMA Design Automation, \xae Inc. Ultra Librarian\xae"}),Object(J.jsx)("p",{children:"Should you have any questions concerning this agreement, or if you wish to contact EMA Design Automation, Inc. for any reason, please write: EMA Design Automation, Inc., Attn: Legal Department, PO Box 23325, Rochester, New York 14692."})]}),e.TERMS_AND_CONDITIONS_FOOTER=Object(J.jsxs)(J.Fragment,{children:[Object(J.jsx)("div",{children:Object(J.jsx)(I.a,{ref:L,name:"userConsent",className:"not-allowed",variant:"default",style:{backgroundColor:"#3cb4e6",color:"white"},children:"OK"})}),Object(J.jsx)("div",{children:Object(J.jsx)(I.a,{ref:M,name:"userConsent",className:"not-allowed",variant:"default",style:{backgroundColor:"#3cb4e6",color:"white"},children:"Close"})})]}),e.TERMS_AND_CONDITIONS_FOR_CUSTOM_PINS=Object(J.jsx)("div",{children:Object(Ee.a)(window.CAD_REST_API_PIN_TERMS)}),e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){return Object(J.jsx)("div",{children:Object(J.jsx)(Z,{isOpened:this.props.isOpened,popupHeader:this.TERMS_AND_CONDITIONS_HEADER,popUpBody:""!==window.CAD_CUSTOM_PIN_MAPPING?this.TERMS_AND_CONDITIONS_FOR_CUSTOM_PINS:this.TERMS_AND_CONDITIONS_GENERIC_ACCESS,popUpFooter:this.TERMS_AND_CONDITIONS_FOOTER,closeRef:M})})}}]),n}(o.a.Component),Ne=Te,Se=function(e){Object(u.a)(n,e);var t=Object(p.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).downloadBtn=void 0,a.cadSummaryGrid=void 0,a.cadPickList=void 0,a.consentCheck=void 0,a.VALID_CHARS=/^[A-Za-z0-9_*-]+$/,a.CHAR_RETRIEVED=/[A-Za-z0-9_*-]/g,a.PROJECT_CONSENT_KEY="CADProviderConsentProject",a.FINDER_CONSENT_KEY="CADProviderConsentFinder",a.formatCADmodelJson=function(e){var t=[];e.forEach((function(e){t.find((function(t){return t.cad_family===e.cad_family}))||t.push({cad_family:e.cad_family,group_name:[]})})),t.map((function(t){return e.forEach((function(e){if(e.cad_family===t.cad_family)return t.group_name.push(e)}))}));var n=a.CADFamilyFilter(t,t[0].cad_family);return a.setState({newCADFormat:t,cadFamilyGroupNames:n,cadFamilySelected:n[0].cad_family}),t},a.onFocus=function(){var e=a.state.consent,t=window.consentHandler.getConsent(window.CAD_LEVEL);"FINDER"===window.CAD_LEVEL?window.FINDER_CONSENT=t:window.PROJECT_CONSENT=t,e!==a.getConsentOnReactAppStart()&&(a.setState({consent:a.getConsentOnReactAppStart()}),a.getConsentOnReactAppStart()&&"PROJECT"===window.CAD_LEVEL&&a.getCustomPreviews(a.props.api,a.props.uid,window.ioc.loadPinConfig()))},a.handleCADSelected=function(e,t,n,i){var o=a.state.cadShoppingCartContent,r=o.map((function(e){return e.id})).includes(t);!e.target.checked&&r?a.removeFromShopping(t):e.target.checked&&!r&&(o.push({id:t,cad_product:n,cad_family:i}),a.setState({cadShoppingCartContent:o}),"PROJECT"===window.CAD_LEVEL&&window.ioc.setDirty())},a.isDownloadAllowed=function(){var e,t,n=a.state,i=n.cadShoppingCartContent,o=n.consent;return!i.length||i.length>5||!o?(null===(e=a.downloadBtn.current)||void 0===e||e.classList.add("not-allowed"),!0):(null===(t=a.downloadBtn.current)||void 0===t||t.classList.remove("not-allowed"),!1)},a.isDisabled=function(e){return 5===a.state.cadShoppingCartContent.length&&-1===a.state.cadSelected.indexOf(e)},a.changeCADFamily=function(){var e=Object(m.a)(v.a.mark((function e(t){var n,i;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("CAD family uin use",t.target.textContent),n=a.state.newCADFormat,i=a.CADFamilyFilter(n,t.target.textContent),a.setState({cadFamilyGroupNames:i,dropDownText:t.target.textContent});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.removeFromShopping=function(e){var t=a.state.cadShoppingCartContent,n=t.find((function(t){return t.id===e}));return void 0!==n&&t.splice(t.indexOf(n),1),a.setState({cadShoppingCartContent:t}),"PROJECT"===window.CAD_LEVEL&&window.ioc.setDirty(),t},a.handleConsent=function(e){console.log("Consent",e.target.checked),e.target.checked?(a.setConsentAccordingToLevel("true"),"PROJECT"===window.CAD_LEVEL&&a.getCustomPreviews(a.props.api,a.props.uid,window.ioc.loadPinConfig())):e.target.checked||a.setConsentAccordingToLevel("false"),a.setState({consent:e.target.checked})},a.state={cadSelected:[],cadSelectedName:[],loading:!1,cadFamilyGroupNames:null,newCADFormat:a.formatCADmodelJson(e.cadFamily),cadFamilySelected:"",cadShoppingCartContent:[],isDownloadFailed:!1,DownloadInterruptReason:"",showAgreementComponent:!1,consent:a.getConsentOnReactAppStart(),invalidPinsArray:null,invalidPinsPopOpened:!1,downloadCustomCADmodels:!1,exportDataBody:null,pinWarning:!1,pinWarningsArray:null,pinMapping:a.initiazePinMappingState(),pinConfig:i.DualCAD,uid:a.props.uid,dropDownText:i.CAD_TO_CHOOSE},a.downloadBtn=o.a.createRef(),a.cadSummaryGrid=o.a.createRef(),a.cadPickList=o.a.createRef(),a._onButtonClick=a._onButtonClick.bind(Object(d.a)(a)),a._cancelDownload=a._cancelDownload.bind(Object(d.a)(a)),a._downloadAnyway=a._downloadAnyway.bind(Object(d.a)(a)),a.consentCheck=o.a.createRef(),a}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e,t,n,a,o=this.state.consent;"PROJECT"===window.CAD_LEVEL&&(e=void 0!==window.ioc.loadCadFormats()&&""!==window.ioc.loadCadFormats()&&"[]"!==window.ioc.loadCadFormats()?JSON.parse(window.ioc.loadCadFormats()):null,this.setState({cadShoppingCartContent:null!==e?e:[],cadFamilyGroupNames:null!==e?this.CADFamilyFilter(this.formatCADmodelJson(this.props.cadFamily),e[0].cad_family):null,cadFamilySelected:null!==e?e[0].cad_family:"",pinConfig:null!==window.ioc.loadPinConfig()?window.ioc.loadPinConfig():i.DualCAD,dropDownText:null!==e?e[0].cad_family:i.CAD_TO_CHOOSE}),o&&this.getCustomPreviews(this.props.api,this.props.uid,window.ioc.loadPinConfig()),null!==window.ioc.loadPinConfig()&&(window.ioc.loadPinConfig()===i.PinNameCAD?null===(t=G.current)||void 0===t||t.click():window.ioc.loadPinConfig()===i.DualCAD?null===(n=W.current)||void 0===n||n.click():null===(a=Y.current)||void 0===a||a.click()));window.addEventListener("focus",this.onFocus)}},{key:"componentDidUpdate",value:function(){if("PROJECT"===window.CAD_LEVEL){var e,t,n=this.state,a=n.cadShoppingCartContent,o=n.consent;if(window.ioc.getBoolean()){var r,s,c,l,d;if(r=void 0!==window.ioc.loadCadFormats()&&""!==window.ioc.loadCadFormats()&&"[]"!==window.ioc.loadCadFormats()?JSON.parse(window.ioc.loadCadFormats()):null,this.setState({cadShoppingCartContent:null!==r?r:[],cadFamilyGroupNames:null!==r?this.CADFamilyFilter(this.formatCADmodelJson(this.props.cadFamily),r[0].cad_family):null,cadFamilySelected:null!==r?r[0].cad_family:"",pinConfig:null!==window.ioc.loadPinConfig()?window.ioc.loadPinConfig():i.DualCAD,dropDownText:null!==r?r[0].cad_family:i.CAD_TO_CHOOSE}),null!==window.ioc.loadPinConfig())window.ioc.loadPinConfig()===i.PinNameCAD?null===(s=G.current)||void 0===s||s.click():window.ioc.loadPinConfig()===i.DualCAD?null===(c=W.current)||void 0===c||c.click():null===(l=Y.current)||void 0===l||l.click();else null===(d=W.current)||void 0===d||d.click();window.ioc.setBoolean()}window.ioc.getPinoutBoolean()&&o&&(this.getCustomPreviews(this.props.api,this.props.uid,window.ioc.loadPinConfig()),window.ioc.setPinoutBoolean());var u=(null===(e=G.current)||void 0===e?void 0:e.checked)?i.PinNameCAD:(null===(t=W.current)||void 0===t?void 0:t.checked)?i.DualCAD:i.ProjectNamingCAD;JSON.stringify(a)===window.ioc.loadCadFormats()&&u===window.ioc.loadPinConfig()||window.ioc.save(JSON.stringify(a),u)}this.listenToUserConsent(),this.closeConsentPopUp()}},{key:"componentWillUnmount",value:function(){this.stopListenToUserConsent(),window.removeEventListener("focus",this.onFocus)}},{key:"getCustomPreviews",value:function(){var e=Object(m.a)(v.a.mark((function e(t,n,i){var a,o=this;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=this.selectWhichPinsConfig(i),this.setState({loading:!0}),e.abrupt("return",null===t||void 0===t?void 0:t.post("".concat(window.CAD_REST_API_CUSTOM_PREVIEWS_URL),{uid:n,pin_mappings:a},{headers:{Accept:"application/json","Content-Type":"application/json"}}).then((function(e){e.data.pin_warnings.invalid_characters.length|e.data.pin_warnings.unmatched_pins.length&&o.setState({pinWarning:!0,pinWarningsArray:e.data.pin_warnings});var t=Date.now().toString();return T(e.data.preview_data.footprint_previews,e.data.preview_data.symbol_previews,t,!0,!0,e.data.threed_available),o.setState({loading:!1}),e.data.preview_data.footprint_previews})).catch((function(e){return console.log("[CADFormatsMenu component] cannot post for previews",e),e})));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,i){return e.apply(this,arguments)}}()},{key:"generateZipFiles",value:function(){var e=Object(m.a)(v.a.mark((function e(t,n,a){var o,r,s,c;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.state.downloadCustomCADmodels,o={uid:n,export_format_ids:a,export_options:[],pin_mappings:[]},""!==window.CAD_CUSTOM_PIN_MAPPING?(c=(null===(r=G.current)||void 0===r?void 0:r.checked)?i.PinNameCAD:(null===(s=W.current)||void 0===s?void 0:s.checked)?i.DualCAD:i.ProjectNamingCAD,console.log("[CAD formats] which config before download chosen",c),o.pin_mappings=this.selectWhichPinsConfig(c),this.setState({exportDataBody:o}),this.setState({pinConfig:c}),this.listInvalidPins(o.pin_mappings)||(this.downloadZip(t,o),this.getCustomPreviews(t,n,c))):this.downloadZip(t,o);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,i){return e.apply(this,arguments)}}()},{key:"downloadZip",value:function(e,t){var n=this;this.setState({loading:!0}),null===e||void 0===e||e.post(window.CAD_REST_API_CUSTOM_CAD_FILES_URL,t,{responseType:"arraybuffer",headers:{Accept:"application/json","Content-Type":"application/json"}}).then((function(e){var t=new Blob([e.data],{type:"application/octet-stream"}),i="";return n.state.cadShoppingCartContent.forEach((function(e){i.includes(e.cad_family)||(i+=e.cad_family+",")})),i=i.substring(0,i.length-1),window.analytics.sendData("Success",i,window.CAD_LEVEL,window.CAD_SELECTED_CPN,window.CAD_PIN_CONFIG),Object(pe.saveAs)(t)})).catch((function(e){console.log("Download interrupted",e);var t="";if("Error: Network Error"===e.toString())t="Network error";else switch(e.response.status.toString()){case"404":t="Network error";break;case"500":t="Failure due CAD API"}var i="";n.state.cadShoppingCartContent.forEach((function(e){i.includes(e.cad_family)||(i+=e.cad_family+",")})),i=i.substring(0,i.length-1),window.analytics.sendData(t,i,window.CAD_LEVEL,window.CAD_SELECTED_CPN,window.CAD_PIN_CONFIG),n.setState({loading:!1,isDownloadFailed:!0,DownloadInterruptReason:e.toString()})})),this.setState({loading:!1})}},{key:"listInvalidPins",value:function(e){var t=this,n=e.filter((function(e){return!0===t.detectInvalidCharacter(e.pin_text)}));if(n.length){var i=n.map((function(e){return{pin_position:e.pin_position,pin_name:e.pin_name,pin_text:e.pin_text,invalid:t.extractInvalidCharacters(e.pin_text),validString:t.cleanInvalidPinText(e.pin_text)}}));return this.setState({invalidPinsArray:i,invalidPinsPopOpened:!0,downloadCustomCADmodels:!1}),!0}return this.setState({invalidPinsArray:[],invalidPinsPopOpened:!1,downloadCustomCADmodels:!0}),!1}},{key:"detectInvalidCharacter",value:function(e){return!this.VALID_CHARS.test(e)}},{key:"extractInvalidCharacters",value:function(e){return e.replace(this.CHAR_RETRIEVED,"")}},{key:"cleanInvalidPinText",value:function(e){return e.replace(/[^A-Za-z0-9_*-]/g,"").replace(/ +/," ")}},{key:"CADFamilyFilter",value:function(e,t){var n=e.filter((function(e){return e.cad_family===t}));return this.setState({cadFamilySelected:n[0].cad_family}),n}},{key:"isChecked",value:function(e){var t=this.state.cadShoppingCartContent.map((function(e){return e.id})).includes(e);return!!t}},{key:"_onButtonClick",value:function(){this.state.showAgreementComponent?this.setState({showAgreementComponent:!1}):this.setState({showAgreementComponent:!0})}},{key:"initiazePinMappingState",value:function(){if(""!==window.CAD_CUSTOM_PIN_MAPPING&&null!=window.java&&void 0!=window.java){var e=window.java.getCustomPinsAsString();return JSON.parse(e)}return[]}},{key:"stopListenToUserConsent",value:function(){var e=s.a.findDOMNode(L.current);e&&e.removeEventListener("click",(function(){return console.log("bye bye")}))}},{key:"closeConsentPopUp",value:function(){var e=this,t=s.a.findDOMNode(M.current);t&&t.addEventListener("click",(function(){e.setState({showAgreementComponent:!1})}))}},{key:"listenToUserConsent",value:function(){var e=this,t=s.a.findDOMNode(L.current);t&&t.addEventListener("click",(function(){e.setConsentAccordingToLevel("true"),e.setState({showAgreementComponent:!1,consent:!0}),"PROJECT"===window.CAD_LEVEL&&e.getCustomPreviews(e.props.api,e.props.uid,window.ioc.loadPinConfig())}))}},{key:"setConsentAccordingToLevel",value:function(e){"FINDER"===window.CAD_LEVEL?window.FINDER_CONSENT=e:"PROJECT"===window.CAD_LEVEL&&(window.PROJECT_CONSENT=e),window.consentHandler.setConsent(window.CAD_LEVEL,e)}},{key:"getConsentOnReactAppStart",value:function(){return"FINDER"===window.CAD_LEVEL?"true"===window.FINDER_CONSENT:"true"===window.PROJECT_CONSENT}},{key:"_cancelDownload",value:function(){this.removePinsPopUp(!1)}},{key:"_downloadAnyway",value:function(){var e=this.state,t=e.exportDataBody,n=e.pinConfig;this.removePinsPopUp(!0),this.downloadZip(this.props.api,t),this.getCustomPreviews(this.props.api,this.props.uid,n)}},{key:"_hideWarning",value:function(){this.state.pinWarning?this.setState({pinWarning:!1}):this.setState({pinWarning:!0})}},{key:"removePinsPopUp",value:function(e){this.state.invalidPinsPopOpened?this.setState({invalidPinsPopOpened:!1}):this.setState({invalidPinsPopOpened:!0}),this.setState({downloadCustomCADmodels:e})}},{key:"countInvalidCharacters",value:function(e){var t=this,n=[];return null===e||void 0===e||e.map((function(e){e.pin_text.split("").map((function(e){t.VALID_CHARS.test(e)||n.push(e)}))})),n.length}},{key:"selectWhichPinsConfig",value:function(e){var t;return null!=window.java&&void 0!=window.java&&(e===i.PinNameCAD?(t=window.java.getStandardPinsAsString(),console.log("EDA models in Pin name mode"),this.setState({pinMapping:JSON.parse(t)})):e===i.ProjectNamingCAD?(t=window.java.getOnlyCustomPinsAsString(),console.log("EDA models in Project naming mode"),this.setState({pinMapping:JSON.parse(t)})):e!==i.DualCAD&&null!==e||(t=window.java.getCustomPinsAsString(),console.log("EDA models in Dual mode"),this.setState({pinMapping:JSON.parse(t)}))),JSON.parse(t)}},{key:"render",value:function(){var e=this,t=this.state,n=t.loading,i=t.newCADFormat,a=t.cadFamilyGroupNames,o=t.cadFamilySelected,r=t.cadShoppingCartContent,s=t.isDownloadFailed,c=t.DownloadInterruptReason,l=t.showAgreementComponent,d=t.consent,u=t.invalidPinsArray,p=t.invalidPinsPopOpened,h=t.pinWarning,f=t.pinWarningsArray,w=t.dropDownText,O=Object(ue.a)(Array(5));r.forEach((function(e){var t=O.indexOf(void 0);-1!==t&&(O[t]=e)}));var b=this.isDownloadAllowed(),C=r.map((function(e){return e.id})),A=function(){var t=Object(m.a)(v.a.mark((function t(){return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.generateZipFiles(e.props.api,e.props.uid,C);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),g=function(){var t=Object(m.a)(v.a.mark((function t(){return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getCustomPreviews(e.props.api,e.props.uid,window.CAD_PIN_CONFIG);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),j=this.countInvalidCharacters(u),y=Object(J.jsx)(I.a,{ref:U,name:"warningBtn",variant:"default",style:{backgroundColor:"#3cb4e6",color:"white"},onClick:this._hideWarning.bind(this),children:"OK"}),E=i.map((function(e){return{key:e.cad_family,text:e.cad_family,value:e.cad_family}}));return Object(J.jsx)("div",{children:this.props.networkstatus?Object(J.jsxs)(J.Fragment,{children:[Object(J.jsxs)("div",{className:"CadMenu",children:[Object(J.jsxs)("div",{className:"MXSelectDiv",style:{width:"22em"},children:[Object(J.jsx)(ce.a,{text:w,onChange:this.changeCADFamily,fluid:!0,selection:!0,options:E}),null!==a&&""!==o&&a[0].group_name.map((function(t){return Object(J.jsxs)("div",{style:{marginTop:"0.8em",marginBottom:"0.8em"},children:[Object(J.jsx)("input",{ref:e.cadPickList,className:"CadCheckBox",type:"checkbox",value:t.id,onChange:function(n){return e.handleCADSelected(n,t.id,t.name,t.cad_family)},disabled:e.isDisabled(t.id),checked:e.isChecked(t.id)},t.id),Object(J.jsx)("label",{htmlFor:t.name,style:{color:"#03234B",marginLeft:"0.5em"},children:t.name})]},t.id)}))]}),Object(J.jsx)("div",{className:"CADSelected",style:{marginRight:"3%",width:"27%",marginLeft:"3%"},ref:this.cadSummaryGrid,children:Object(J.jsxs)(be.a,{celled:!0,unstackable:!0,padded:!0,width:"100",children:[Object(J.jsx)(Ce.a,{className:"tableHeader",children:Object(J.jsxs)(Ae.a,{textAlign:"center",verticalAlign:"middle",children:[Object(J.jsx)(ge.a,{children:"Remove"}),Object(J.jsx)(ge.a,{children:"CAD Product"}),Object(J.jsx)(ge.a,{children:"CAD Family"})]})}),Object(J.jsx)(je.a,{children:O.map((function(t,n){return Object(J.jsxs)(Ae.a,{children:[Object(J.jsx)(ye.a,{textAlign:"center",verticalAlign:"middle",width:2,children:t?Object(J.jsx)("img",{alt:"removeIcon",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAFiSURBVHgB7ZexTsMwEIbvTCkjeYRGwMDWbClT+gbNhLrBk5UtdAo8QbLRrWVCAqrkDYiEhEQFPmwShlYxcdoGpMrfYkc+3/2xPdwP8M8g1MQNnjwA6ijSpZPhSQxNCHCDhw5j7ZCAuhUpU+KL/mR4moIGLdAEWTui/M8zJLxZXSckSwxdeTqMtUIxd7Ty6gTJY0eGkZimB2+vTnzpZGVxXphY7wueCBEWcerrXAcDLYo7J7pXFZfEvp0R/7xd2rMdATkI7AW2zNIV9MbzRFf5BiXTu/Mj++dr5QQImkejhhs8XvTGz3R2PR/BhohcVzKXzFm2XusNNIERYAQYAUaAEWAEGAG7LwAZO4S6AtgezOQoev2BN5pasCb5XiyMDKZlMUpfIBrUKXy7ILmRZoiobMdVEMFAegQxFY3osV0Wo3RGwl75yPajokvuEK3XsKIQz/mHr16v4HczWlm+tln9c74AzY97n7BpvtkAAAAASUVORK5CYII=",onClick:function(){return e.removeFromShopping(t.id)},style:{width:"2em",height:"2em",cursor:"pointer"}}):""}),Object(J.jsx)(ye.a,{textAlign:"center",verticalAlign:"middle",width:15,children:t?t.cad_product:""}),Object(J.jsx)(ye.a,{textAlign:"center",verticalAlign:"middle",width:15,children:t?t.cad_family:""})]},n)}))})]})}),Object(J.jsx)("div",{children:Object(J.jsxs)("div",{className:"CADbuttonDownload",style:{marginLeft:"2.2em"},children:[Object(J.jsxs)("div",{className:"CADbuttonSubItem",children:[Object(J.jsxs)("button",{ref:this.downloadBtn,className:"cadBtn not-allowed",disabled:b,type:"submit",onClick:A,children:["CAD Models",Object(J.jsx)("span",{children:Object(J.jsx)(fe,{className:"logoDownload"})})]}),""!==window.CAD_CUSTOM_PIN_MAPPING&&Object(J.jsx)("button",{className:"cadBtn",type:"submit",disabled:!d,onClick:g,children:"Refresh symbol previews"})]}),Object(J.jsx)("div",{className:"CADbuttonSubItem",children:n&&Object(J.jsx)(Oe.a,{type:"Bars",color:"#3CB4E6",height:50,width:50})})]})}),Object(J.jsx)("div",{className:"CADproviderLogo",style:{marginLeft:"2.2em"},children:Object(J.jsx)("img",{src:this.props.CAD_provider_logo_url,alt:"ULlogo",style:{width:"8em",height:"4em",marginLeft:"0.5em"}})}),!0===s&&Object(J.jsx)(Z,{isOpened:s,popupHeader:"Download interruption",popUpBody:Object(J.jsxs)("p",{style:{color:"red"},children:["CAD download fails due to ",c]}),popUpFooter:Object(J.jsx)(J.Fragment,{}),closeRef:null})]}),Object(J.jsxs)("div",{className:"Agreement",style:{display:"flex",justifyContent:"center",alignItems:"center",paddingLeft:"14em"},children:[Object(J.jsxs)("div",{children:[Object(J.jsx)("input",{ref:this.consentCheck,type:"checkbox",onChange:function(t){return e.handleConsent(t)},checked:d,style:{cursor:"pointer"}}),Object(J.jsxs)("label",{htmlFor:"I have read and agree to the Ultra Librarian Terms And Conditions",style:{color:"#03234B",marginLeft:"0.5em",marginRight:"0.5em"},children:["I have read and agree to the"," ",window.CAD_PROVIDER_COMPANY_NAME," ",Object(J.jsxs)("a",{href:"#",onClick:this._onButtonClick,children:[" ","Terms and Conditions"," "]})]})]}),l?Object(J.jsx)(Ne,{isOpened:l,CAD_provider_logo_url:window.CAD_REST_API_LOGO_URL,checked:d}):null,p?Object(J.jsx)(Z,{isOpened:p,popupHeader:"Invalid characters found in pin mapping",popUpBody:Object(J.jsxs)("div",{className:"invalidPinBody",children:[Object(J.jsx)("ol",{children:null===u||void 0===u?void 0:u.map((function(e){return Object(J.jsx)("p",{children:Object(J.jsx)("li",{children:Object(J.jsxs)("ul",{children:[Object(J.jsxs)("u",{children:[" Pin position ",e.pin_position]}),Object(J.jsxs)("li",{children:[" Pin name : ",e.pin_name]}),Object(J.jsx)("li",{children:Object(J.jsx)(K,{invalidPinText:e.pin_text,sentence:"will be rendered as:"})})]})})})}))}),1===j?Object(J.jsxs)("p",{children:[Object(J.jsx)("span",{children:"That "}),Object(J.jsx)("span",{style:{color:"#E6007E"},children:" character"}),Object(J.jsxs)("span",{children:[" ","will be removed from CAD models and symbol previews"]})]}):Object(J.jsxs)("p",{children:[Object(J.jsx)("span",{children:"Those "}),Object(J.jsxs)("span",{style:{color:"#E6007E"},children:[" ",j," characters"]}),Object(J.jsx)("span",{children:" will be removed from CAD models"})]})]}),popUpFooter:Object(J.jsxs)("div",{children:[Object(J.jsx)(I.a,{ref:B,onClick:this._cancelDownload,name:"cancelDownload",variant:"default",style:{backgroundColor:"#3cb4e6",color:"white"},children:"Cancel"}),Object(J.jsx)(I.a,{onClick:this._downloadAnyway,name:"downloadAnyway",variant:"warning",children:"Download anyway"})]}),closeRef:B}):null,h?Object(J.jsx)("div",{ref:F,children:null!==f&&Object(J.jsx)(Q,{isOpened:h,pin_warnings:f,btn:y,closeRef:U})}):null]})]}):null})}}]),n}(o.a.Component),_e=Se,xe=n(322);function De(){return De=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},De.apply(this,arguments)}function Pe(e,t){if(null==e)return{};var n,i,a=function(e,t){if(null==e)return{};var n,i,a={},o=Object.keys(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var Ie=a.createElement("path",{fill:"#03234b",d:"M475 243.196v-45.221l-3.452-3.499C440.81 163.298 287.49 93.395 249.999 93.395c-37.489 0-190.809 69.903-221.547 101.082L25 197.975v45.221c0 9.878 5.185 19.084 13.408 24.342l-7.443 11.531 6.888 3.306 3.584 49.984 11.252 5.399 4.453-46.126 6.888 3.305 7.528-11.662 14.863 6.911-7.637 11.831 6.888 3.307 3.583 49.983 11.252 5.399 4.453-46.126 6.889 3.306 7.882-12.211 14.863 6.911-7.991 12.38 6.889 3.306 3.584 49.983 11.251 5.4 4.453-46.126 6.889 3.305 8.236-12.76 14.863 6.911-8.346 12.93 6.889 3.306 3.584 49.984 11.251 5.399 4.453-46.126 6.888 3.305 8.59-13.309 33.925 15.775 33.878-15.753 8.577 13.287 6.888-3.305 4.453 46.126 11.252-5.399 3.583-49.984 6.888-3.306-8.331-12.908 14.863-6.911 8.222 12.738 6.888-3.305 4.453 46.126 11.251-5.4 3.584-49.983 6.888-3.306-7.977-12.358 14.863-6.911 7.868 12.189 6.889-3.306 4.453 46.126 11.251-5.399 3.584-49.983 6.889-3.307-7.623-11.809 14.863-6.911 7.513 11.64 6.889-3.305 4.453 46.126 11.251-5.399 3.584-49.984 6.888-3.306-7.426-11.505c8.244-5.253 13.449-14.473 13.449-24.368zM51.633 220.805c-1.55-.75-2.639-2.492-2.639-4.358v-8.271C81.977 180.668 220.945 117.387 250 117.387c29.055 0 168.024 63.281 201.007 90.789v8.271c0 1.866-1.089 3.608-2.639 4.358L250 313.944 51.633 220.805z"});function Re(e,t){var n=e.title,i=e.titleId,o=Pe(e,["title","titleId"]);return a.createElement("svg",De({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 500 500",ref:t,"aria-labelledby":i},o),n?a.createElement("title",{id:i},n):null,Ie)}var ke=a.forwardRef(Re),Le=(n.p,function(e){Object(u.a)(n,e);var t=Object(p.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return Object(J.jsxs)("div",{className:"view",children:[Object(J.jsxs)("div",{className:"title",children:[Object(J.jsx)(ke,{style:{width:"4em",height:"2.5em"}}),Object(J.jsx)("h1",{style:{color:"#03234B"},children:this.props.previewName})]}),Object(J.jsx)("div",{className:"symbol",children:Object(J.jsx)("iframe",{title:"3D model",src:this.props.previewPicto})}),Object(J.jsx)("div",{className:"symbolSelection",style:{padding:"3.7em 0"}})]})}}]),n}(o.a.Component)),Me=Le;function Fe(){return Fe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Fe.apply(this,arguments)}function Ue(e,t){if(null==e)return{};var n,i,a=function(e,t){if(null==e)return{};var n,i,a={},o=Object.keys(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var He=a.createElement("g",{fill:"#03234b"},a.createElement("path",{d:"M408.218 325.424h65.559v28.126h-65.559zM408.218 265.766h65.559v28.126h-65.559zM408.218 206.099h65.559v28.126h-65.559zM408.218 146.441h65.559v28.126h-65.559zM26.223 325.424h65.559v28.126H26.223zM26.223 265.766h65.559v28.126H26.223zM26.223 206.099h65.559v28.126H26.223zM26.223 146.441h65.559v28.126H26.223zM146.445 408.219h28.126v65.563h-28.126zM206.107 408.219h28.127v65.555h-28.127zM265.771 408.219h28.126v65.564h-28.126zM325.431 408.219h28.126v65.555h-28.126zM146.445 26.219h28.126v65.563h-28.126zM206.107 26.227h28.127v65.554h-28.127zM265.771 26.218h28.126v65.564h-28.126zM325.431 26.218h28.126v65.564h-28.126zM114.305 113.746h271.797v271.795H114.305z"}));function Be(e,t){var n=e.title,i=e.titleId,o=Ue(e,["title","titleId"]);return a.createElement("svg",Fe({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 500 500",ref:t,"aria-labelledby":i},o),n?a.createElement("title",{id:i},n):null,He)}var Ve=a.forwardRef(Be),Ge=(n.p,function(e){Object(u.a)(n,e);var t=Object(p.a)(n);function n(e){var i;return Object(c.a)(this,n),(i=t.call(this,e)).FootprintpreviewDiv=void 0,i.FootprintPreviewSymbol=void 0,i.onCropChange=function(e){i.setState({crop:e})},i.onCropComplete=function(e,t){},i.onZoomChange=function(e){i.setState({zoom:e})},i.changeFootprintNames=function(){var e=Object(m.a)(v.a.mark((function e(t){var n,a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=i.props.footprintPreviews.filter((function(e){return e.type===t.target.textContent})),i.setState({footprintArrayNames:n}),console.log("[FootprintPreviews component] type chosen",t.target.textContent),a=n[0].data,i.setState({imageTodisplay:a});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),i.displayImageFromNameSelection=function(){var e=Object(m.a)(v.a.mark((function e(t){var n,a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=i.state.footprintArrayNames,a=n.filter((function(e){return e.name===t.target.textContent})),i.setState({imageTodisplay:a[0].data});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),i.state={crop:{x:0,y:0},zoom:1,aspect:1.6,footprintArrayTypes:e.footprintPreviews.map((function(e){return e.type})).filter((function(e,t,n){return n.indexOf(e)===t})),footprintArrayNames:e.footprintPreviews.filter((function(t){return t.type===e.footprintPreviews[0].type})),imageTodisplay:e.footprintPreviews[0].data},i.FootprintpreviewDiv=o.a.createRef(),i.FootprintPreviewSymbol=o.a.createRef(),i}return Object(l.a)(n,[{key:"componentDidMount",value:function(){}},{key:"componentDidUpdate",value:function(){}},{key:"render",value:function(){var e=this.state,t=e.crop,n=e.zoom,i=e.aspect,a=e.footprintArrayTypes,o=e.footprintArrayNames,r=e.imageTodisplay,s=a.map((function(e){return{key:e,text:e,value:e}})),c=o.map((function(e){return{key:e.name,text:e.name,value:e.name}}));return Object(J.jsxs)("div",{className:"view",ref:this.FootprintpreviewDiv,children:[Object(J.jsxs)("div",{className:"title",children:[Object(J.jsx)(Ve,{style:{width:"4em",height:"2.5em"}}),Object(J.jsx)("h1",{style:{color:"#03234B"},children:this.props.FootprintPreviewName})]}),Object(J.jsx)("div",{className:"symbol",ref:this.FootprintPreviewSymbol,children:Object(J.jsx)(ne.a,{image:"data:image/svg+xml;base64,".concat(btoa(unescape(encodeURIComponent(r)))),crop:t,zoom:n,aspect:i,onCropChange:this.onCropChange,onZoomChange:this.onZoomChange,onCropComplete:this.onCropComplete,maxZoom:7,disableAutomaticStylesInjection:!0,showGrid:!1})}),Object(J.jsxs)("div",{className:"symbolSelection",children:[Object(J.jsx)("div",{className:"firstViewselect",children:Object(J.jsx)(ce.a,{onChange:this.changeFootprintNames,fluid:!0,selection:!0,options:s,defaultValue:s[0].value},"firstViewselect")}),Object(J.jsx)("div",{className:"secondViewselect",children:Object(J.jsx)(ce.a,{onChange:this.displayImageFromNameSelection,fluid:!0,selection:!0,options:c,defaultValue:c[0].value},"secondView")})]})]})}}]),n}(o.a.Component)),We=Ge,Ye=function(e){Object(u.a)(n,e);var t=Object(p.a)(n);function n(e){var i;return Object(c.a)(this,n),(i=t.call(this,e)).CONSENT_KEY="CADProviderConsent",i.state={cadFormats:[],footPrint:"",symbol:"",threedModel:"",zipFiles:null,choosenCad:[],api:null,uid:"",windowWidth:window.innerWidth,windowHeight:window.innerHeight,networkStatus:!1,rpn:"",footprintPreviews:[],symbolPreviews:[],cpn:"1",terms:"",level:"",loading:!0,footprint_available:!1,symbol_available:!1,threed_available:!1,messageToDisplay:""},i.updateDimensions=i.updateDimensions.bind(Object(d.a)(i)),i.changeViewDisplay=i.changeViewDisplay.bind(Object(d.a)(i)),i.checkInternetConnection=i.checkInternetConnection.bind(Object(d.a)(i)),i.getApiData=i.getApiData.bind(Object(d.a)(i)),i.getCustomPreviews=i.getCustomPreviews.bind(Object(d.a)(i)),i.setCADAPIwindowVars(),i}return Object(l.a)(n,[{key:"componentDidMount",value:function(){console.log("window var",window.CAD_REST_API_URL),this.getApiData(),window.addEventListener("resize",this.updateDimensions),this.checkInternetConnection(),window.addEventListener("online",this.checkInternetConnection),window.addEventListener("offline",this.checkInternetConnection),this.getCustomPreviews()}},{key:"componentDidUpdate",value:function(e,t,n){var i=this.state.networkStatus;!1!==t.networkStatus||!0!==i||document.hidden||(console.log("Reloading CAD"),"PROJECT"===window.CAD_LEVEL&&window.ioc.reload(),"FINDER"===window.CAD_LEVEL&&window.proxy.reload())}},{key:"componentWillUnmount",value:function(){j(),E(),N(),_(),window.removeEventListener("resize",this.updateDimensions),window.removeEventListener("online",this.checkInternetConnection),window.removeEventListener("offline",this.checkInternetConnection)}},{key:"updateDimensions",value:function(){var e="undefined"!==typeof window?window.innerWidth:0,t="undefined"!==typeof window?window.innerHeight:0;this.setState({windowWidth:e,windowHeight:t})}},{key:"changeViewDisplay",value:function(){var e=this.state,t=e.windowHeight,n=e.windowWidth;return t<458||n<1498?"inline-block":""}},{key:"checkInternetConnection",value:function(){return"online"===(navigator.onLine?"online":"offline")?this.setState({networkStatus:!0}):this.setState({networkStatus:!1})}},{key:"getApiData",value:function(){var e=this;y().subscribe((function(t){try{t.status?e.setState({cadFormats:t.cadFormats,threedModel:t.threedModel,api:t.api,uid:t.uid,rpn:t.rpn,footprintPreviews:t.footprintPreviews,symbolPreviews:t.symbolPreviews,cpn:t.cpn,terms:t.terms,level:"Generic previews",loading:!1,threed_available:t.threed_available,symbol_available:t.symbol_available,footprint_available:t.footprint_available,messageToDisplay:t.messageToDisplay}):console.log("no internet access")}catch(n){Object(xe.a)(n)}}))}},{key:"getCustomPreviews",value:function(){var e=this;S().subscribe((function(t){try{void 0!==t.customSymbolPreviews?e.setState({symbolPreviews:t.customSymbolPreviews,footprintPreviews:t.customFootprintPreviews,level:t.level,threed_available:t.threed_available,symbol_available:t.symbol_available,footprint_available:t.footprint_available}):console.log("custom previews failed")}catch(n){Object(xe.a)(n)}}))}},{key:"setCADAPIwindowVars",value:function(){window.CAD_PIN_CONFIG=i.DualCAD}},{key:"render",value:function(){var e=this.state,t=e.cadFormats,n=e.threedModel,a=e.api,o=e.uid,r=e.networkStatus,s=e.footprintPreviews,c=e.symbolPreviews,l=(e.cpn,e.terms),d=e.level,u=e.loading,p=e.footprint_available,h=e.symbol_available,v=e.threed_available,m=e.messageToDisplay;return Object(J.jsxs)("div",{className:"App",children:[!r&&m!==i.NO_INTERNET&&Object(J.jsx)("div",{className:"noInternet",children:Object(J.jsx)("p",{children:i.NO_INTERNET})}),Object(J.jsxs)("div",{children:[Object(J.jsx)(te,{networkStatus:r}),u?Object(J.jsx)(Oe.a,{type:"Bars",color:"#3CB4E6",height:50,width:50}):Object(J.jsxs)("div",{children:[""!==m&&Object(J.jsx)("div",{className:"noCad",children:m===i.SYS_PROXY_MSG?Object(J.jsxs)("div",{children:[Object(J.jsx)("p",{id:"p1",children:m}),Object(J.jsx)("p",{id:"p2",children:i.GUIDE_MSG})]}):Object(J.jsx)("p",{children:m})}),Object(J.jsx)("div",{children:""!==o?Object(J.jsxs)("div",{className:"flex-container",children:[Object(J.jsx)("div",{children:t.length>0&&Object(J.jsx)("div",{className:"flex-child cadFormats",style:{marginTop:"0em",textAlign:"left",marginRight:"4em",marginLeft:"4em"},children:Object(J.jsx)(_e,{networkstatus:r,cadFamily:t,api:a,uid:o,CAD_provider_logo_url:window.CAD_REST_API_LOGO_URL,terms:l},o)})}),Object(J.jsxs)("div",{className:"flex-child views",style:{display:this.changeViewDisplay()},children:[h&&Object(J.jsx)(de,{previewName:"Symbol",symbolPreviews:c,level:d},d),p&&Object(J.jsx)(We,{FootprintPreviewName:"Footprint",footprintPreviews:s,level:d},d),v&&Object(J.jsx)(Me,{previewName:"3D Model",previewPicto:n})]},d)]}):null},o)]})]})]})}}]),n}(a.Component),ze=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,329)).then((function(t){var n=t.getCLS,i=t.getFID,a=t.getFCP,o=t.getLCP,r=t.getTTFB;n(e),i(e),a(e),o(e),r(e)}))},Je=(n(308),document.createElement("link"));Je.rel="stylesheet",Je.href="https://cdn.jsdelivr.net/npm/semantic-ui/dist/semantic.min.css",document.head.appendChild(Je),s.a.render(Object(J.jsx)(o.a.StrictMode,{children:Object(J.jsx)(Ye,{})}),document.getElementById("root")),ze()}},[[309,1,2]]]);